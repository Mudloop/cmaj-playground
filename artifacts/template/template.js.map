{
  "version": 3,
  "sources": ["../../node_modules/@lit/reactive-element/css-tag.js", "../../node_modules/@lit/reactive-element/reactive-element.js", "../../node_modules/lit-html/lit-html.js", "../../node_modules/lit-element/lit-element.js", "../../node_modules/@lit/reactive-element/decorators/custom-element.js", "../../patch-template/cmaj_api/cmaj-event-listener-list.js", "../../patch-template/cmaj_api/cmaj-midi-helpers.js", "../../patch-template/cmaj_api/cmaj-piano-keyboard.js", "../../patch-template/cmaj_api/cmaj-parameter-controls.js", "../../patch-template/cmaj_api/cmaj-generic-patch-view.js", "../../patch-template/cmaj_api/cmaj-patch-connection.js", "../../patch-template/cmaj_api/cmaj-patch-view.js", "../../patch-template/cmaj_api/cmaj-audio-worklet-helper.js", "../../patch-template/PatchPreview.ts"],
  "sourcesContent": [
    "/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nconst t=globalThis,e=t.ShadowRoot&&(void 0===t.ShadyCSS||t.ShadyCSS.nativeShadow)&&\"adoptedStyleSheets\"in Document.prototype&&\"replace\"in CSSStyleSheet.prototype,s=Symbol(),o=new WeakMap;class n{constructor(t,e,o){if(this._$cssResult$=!0,o!==s)throw Error(\"CSSResult is not constructable. Use `unsafeCSS` or `css` instead.\");this.cssText=t,this.t=e}get styleSheet(){let t=this.o;const s=this.t;if(e&&void 0===t){const e=void 0!==s&&1===s.length;e&&(t=o.get(s)),void 0===t&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),e&&o.set(s,t))}return t}toString(){return this.cssText}}const r=t=>new n(\"string\"==typeof t?t:t+\"\",void 0,s),i=(t,...e)=>{const o=1===t.length?t[0]:e.reduce(((e,s,o)=>e+(t=>{if(!0===t._$cssResult$)return t.cssText;if(\"number\"==typeof t)return t;throw Error(\"Value passed to 'css' function must be a 'css' function result: \"+t+\". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.\")})(s)+t[o+1]),t[0]);return new n(o,t,s)},S=(s,o)=>{if(e)s.adoptedStyleSheets=o.map((t=>t instanceof CSSStyleSheet?t:t.styleSheet));else for(const e of o){const o=document.createElement(\"style\"),n=t.litNonce;void 0!==n&&o.setAttribute(\"nonce\",n),o.textContent=e.cssText,s.appendChild(o)}},c=e?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let e=\"\";for(const s of t.cssRules)e+=s.cssText;return r(e)})(t):t;export{n as CSSResult,S as adoptStyles,i as css,c as getCompatibleStyle,e as supportsAdoptingStyleSheets,r as unsafeCSS};\n//# sourceMappingURL=css-tag.js.map\n",
    "import{getCompatibleStyle as t,adoptStyles as s}from\"./css-tag.js\";export{CSSResult,adoptStyles,css,getCompatibleStyle,supportsAdoptingStyleSheets,unsafeCSS}from\"./css-tag.js\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */const{is:i,defineProperty:e,getOwnPropertyDescriptor:r,getOwnPropertyNames:h,getOwnPropertySymbols:o,getPrototypeOf:n}=Object,a=globalThis,c=a.trustedTypes,l=c?c.emptyScript:\"\",p=a.reactiveElementPolyfillSupport,d=(t,s)=>t,u={toAttribute(t,s){switch(s){case Boolean:t=t?l:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute(t,s){let i=t;switch(s){case Boolean:i=null!==t;break;case Number:i=null===t?null:Number(t);break;case Object:case Array:try{i=JSON.parse(t)}catch(t){i=null}}return i}},f=(t,s)=>!i(t,s),y={attribute:!0,type:String,converter:u,reflect:!1,hasChanged:f};Symbol.metadata??=Symbol(\"metadata\"),a.litPropertyMetadata??=new WeakMap;class b extends HTMLElement{static addInitializer(t){this._$Ei(),(this.l??=[]).push(t)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(t,s=y){if(s.state&&(s.attribute=!1),this._$Ei(),this.elementProperties.set(t,s),!s.noAccessor){const i=Symbol(),r=this.getPropertyDescriptor(t,i,s);void 0!==r&&e(this.prototype,t,r)}}static getPropertyDescriptor(t,s,i){const{get:e,set:h}=r(this.prototype,t)??{get(){return this[s]},set(t){this[s]=t}};return{get(){return e?.call(this)},set(s){const r=e?.call(this);h.call(this,s),this.requestUpdate(t,r,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)??y}static _$Ei(){if(this.hasOwnProperty(d(\"elementProperties\")))return;const t=n(this);t.finalize(),void 0!==t.l&&(this.l=[...t.l]),this.elementProperties=new Map(t.elementProperties)}static finalize(){if(this.hasOwnProperty(d(\"finalized\")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(d(\"properties\"))){const t=this.properties,s=[...h(t),...o(t)];for(const i of s)this.createProperty(i,t[i])}const t=this[Symbol.metadata];if(null!==t){const s=litPropertyMetadata.get(t);if(void 0!==s)for(const[t,i]of s)this.elementProperties.set(t,i)}this._$Eh=new Map;for(const[t,s]of this.elementProperties){const i=this._$Eu(t,s);void 0!==i&&this._$Eh.set(i,t)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(s){const i=[];if(Array.isArray(s)){const e=new Set(s.flat(1/0).reverse());for(const s of e)i.unshift(t(s))}else void 0!==s&&i.push(t(s));return i}static _$Eu(t,s){const i=s.attribute;return!1===i?void 0:\"string\"==typeof i?i:\"string\"==typeof t?t.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise((t=>this.enableUpdating=t)),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach((t=>t(this)))}addController(t){(this._$EO??=new Set).add(t),void 0!==this.renderRoot&&this.isConnected&&t.hostConnected?.()}removeController(t){this._$EO?.delete(t)}_$E_(){const t=new Map,s=this.constructor.elementProperties;for(const i of s.keys())this.hasOwnProperty(i)&&(t.set(i,this[i]),delete this[i]);t.size>0&&(this._$Ep=t)}createRenderRoot(){const t=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return s(t,this.constructor.elementStyles),t}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach((t=>t.hostConnected?.()))}enableUpdating(t){}disconnectedCallback(){this._$EO?.forEach((t=>t.hostDisconnected?.()))}attributeChangedCallback(t,s,i){this._$AK(t,i)}_$EC(t,s){const i=this.constructor.elementProperties.get(t),e=this.constructor._$Eu(t,i);if(void 0!==e&&!0===i.reflect){const r=(void 0!==i.converter?.toAttribute?i.converter:u).toAttribute(s,i.type);this._$Em=t,null==r?this.removeAttribute(e):this.setAttribute(e,r),this._$Em=null}}_$AK(t,s){const i=this.constructor,e=i._$Eh.get(t);if(void 0!==e&&this._$Em!==e){const t=i.getPropertyOptions(e),r=\"function\"==typeof t.converter?{fromAttribute:t.converter}:void 0!==t.converter?.fromAttribute?t.converter:u;this._$Em=e,this[e]=r.fromAttribute(s,t.type),this._$Em=null}}requestUpdate(t,s,i){if(void 0!==t){if(i??=this.constructor.getPropertyOptions(t),!(i.hasChanged??f)(this[t],s))return;this.P(t,s,i)}!1===this.isUpdatePending&&(this._$ES=this._$ET())}P(t,s,i){this._$AL.has(t)||this._$AL.set(t,s),!0===i.reflect&&this._$Em!==t&&(this._$Ej??=new Set).add(t)}async _$ET(){this.isUpdatePending=!0;try{await this._$ES}catch(t){Promise.reject(t)}const t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[t,s]of this._$Ep)this[t]=s;this._$Ep=void 0}const t=this.constructor.elementProperties;if(t.size>0)for(const[s,i]of t)!0!==i.wrapped||this._$AL.has(s)||void 0===this[s]||this.P(s,this[s],i)}let t=!1;const s=this._$AL;try{t=this.shouldUpdate(s),t?(this.willUpdate(s),this._$EO?.forEach((t=>t.hostUpdate?.())),this.update(s)):this._$EU()}catch(s){throw t=!1,this._$EU(),s}t&&this._$AE(s)}willUpdate(t){}_$AE(t){this._$EO?.forEach((t=>t.hostUpdated?.())),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(t){return!0}update(t){this._$Ej&&=this._$Ej.forEach((t=>this._$EC(t,this[t]))),this._$EU()}updated(t){}firstUpdated(t){}}b.elementStyles=[],b.shadowRootOptions={mode:\"open\"},b[d(\"elementProperties\")]=new Map,b[d(\"finalized\")]=new Map,p?.({ReactiveElement:b}),(a.reactiveElementVersions??=[]).push(\"2.0.4\");export{b as ReactiveElement,u as defaultConverter,f as notEqual};\n//# sourceMappingURL=reactive-element.js.map\n",
    "/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nconst t=globalThis,i=t.trustedTypes,s=i?i.createPolicy(\"lit-html\",{createHTML:t=>t}):void 0,e=\"$lit$\",h=`lit$${Math.random().toFixed(9).slice(2)}$`,o=\"?\"+h,n=`<${o}>`,r=document,l=()=>r.createComment(\"\"),c=t=>null===t||\"object\"!=typeof t&&\"function\"!=typeof t,a=Array.isArray,u=t=>a(t)||\"function\"==typeof t?.[Symbol.iterator],d=\"[ \\t\\n\\f\\r]\",f=/<(?:(!--|\\/[^a-zA-Z])|(\\/?[a-zA-Z][^>\\s]*)|(\\/?$))/g,v=/-->/g,_=/>/g,m=RegExp(`>|${d}(?:([^\\\\s\"'>=/]+)(${d}*=${d}*(?:[^ \\t\\n\\f\\r\"'\\`<>=]|(\"|')|))|$)`,\"g\"),p=/'/g,g=/\"/g,$=/^(?:script|style|textarea|title)$/i,y=t=>(i,...s)=>({_$litType$:t,strings:i,values:s}),x=y(1),b=y(2),w=y(3),T=Symbol.for(\"lit-noChange\"),E=Symbol.for(\"lit-nothing\"),A=new WeakMap,C=r.createTreeWalker(r,129);function P(t,i){if(!a(t)||!t.hasOwnProperty(\"raw\"))throw Error(\"invalid template strings array\");return void 0!==s?s.createHTML(i):i}const V=(t,i)=>{const s=t.length-1,o=[];let r,l=2===i?\"<svg>\":3===i?\"<math>\":\"\",c=f;for(let i=0;i<s;i++){const s=t[i];let a,u,d=-1,y=0;for(;y<s.length&&(c.lastIndex=y,u=c.exec(s),null!==u);)y=c.lastIndex,c===f?\"!--\"===u[1]?c=v:void 0!==u[1]?c=_:void 0!==u[2]?($.test(u[2])&&(r=RegExp(\"</\"+u[2],\"g\")),c=m):void 0!==u[3]&&(c=m):c===m?\">\"===u[0]?(c=r??f,d=-1):void 0===u[1]?d=-2:(d=c.lastIndex-u[2].length,a=u[1],c=void 0===u[3]?m:'\"'===u[3]?g:p):c===g||c===p?c=m:c===v||c===_?c=f:(c=m,r=void 0);const x=c===m&&t[i+1].startsWith(\"/>\")?\" \":\"\";l+=c===f?s+n:d>=0?(o.push(a),s.slice(0,d)+e+s.slice(d)+h+x):s+h+(-2===d?i:x)}return[P(t,l+(t[s]||\"<?>\")+(2===i?\"</svg>\":3===i?\"</math>\":\"\")),o]};class N{constructor({strings:t,_$litType$:s},n){let r;this.parts=[];let c=0,a=0;const u=t.length-1,d=this.parts,[f,v]=V(t,s);if(this.el=N.createElement(f,n),C.currentNode=this.el.content,2===s||3===s){const t=this.el.content.firstChild;t.replaceWith(...t.childNodes)}for(;null!==(r=C.nextNode())&&d.length<u;){if(1===r.nodeType){if(r.hasAttributes())for(const t of r.getAttributeNames())if(t.endsWith(e)){const i=v[a++],s=r.getAttribute(t).split(h),e=/([.?@])?(.*)/.exec(i);d.push({type:1,index:c,name:e[2],strings:s,ctor:\".\"===e[1]?H:\"?\"===e[1]?I:\"@\"===e[1]?L:k}),r.removeAttribute(t)}else t.startsWith(h)&&(d.push({type:6,index:c}),r.removeAttribute(t));if($.test(r.tagName)){const t=r.textContent.split(h),s=t.length-1;if(s>0){r.textContent=i?i.emptyScript:\"\";for(let i=0;i<s;i++)r.append(t[i],l()),C.nextNode(),d.push({type:2,index:++c});r.append(t[s],l())}}}else if(8===r.nodeType)if(r.data===o)d.push({type:2,index:c});else{let t=-1;for(;-1!==(t=r.data.indexOf(h,t+1));)d.push({type:7,index:c}),t+=h.length-1}c++}}static createElement(t,i){const s=r.createElement(\"template\");return s.innerHTML=t,s}}function S(t,i,s=t,e){if(i===T)return i;let h=void 0!==e?s._$Co?.[e]:s._$Cl;const o=c(i)?void 0:i._$litDirective$;return h?.constructor!==o&&(h?._$AO?.(!1),void 0===o?h=void 0:(h=new o(t),h._$AT(t,s,e)),void 0!==e?(s._$Co??=[])[e]=h:s._$Cl=h),void 0!==h&&(i=S(t,h._$AS(t,i.values),h,e)),i}class M{constructor(t,i){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=i}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){const{el:{content:i},parts:s}=this._$AD,e=(t?.creationScope??r).importNode(i,!0);C.currentNode=e;let h=C.nextNode(),o=0,n=0,l=s[0];for(;void 0!==l;){if(o===l.index){let i;2===l.type?i=new R(h,h.nextSibling,this,t):1===l.type?i=new l.ctor(h,l.name,l.strings,this,t):6===l.type&&(i=new z(h,this,t)),this._$AV.push(i),l=s[++n]}o!==l?.index&&(h=C.nextNode(),o++)}return C.currentNode=r,e}p(t){let i=0;for(const s of this._$AV)void 0!==s&&(void 0!==s.strings?(s._$AI(t,s,i),i+=s.strings.length-2):s._$AI(t[i])),i++}}class R{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(t,i,s,e){this.type=2,this._$AH=E,this._$AN=void 0,this._$AA=t,this._$AB=i,this._$AM=s,this.options=e,this._$Cv=e?.isConnected??!0}get parentNode(){let t=this._$AA.parentNode;const i=this._$AM;return void 0!==i&&11===t?.nodeType&&(t=i.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,i=this){t=S(this,t,i),c(t)?t===E||null==t||\"\"===t?(this._$AH!==E&&this._$AR(),this._$AH=E):t!==this._$AH&&t!==T&&this._(t):void 0!==t._$litType$?this.$(t):void 0!==t.nodeType?this.T(t):u(t)?this.k(t):this._(t)}O(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.O(t))}_(t){this._$AH!==E&&c(this._$AH)?this._$AA.nextSibling.data=t:this.T(r.createTextNode(t)),this._$AH=t}$(t){const{values:i,_$litType$:s}=t,e=\"number\"==typeof s?this._$AC(t):(void 0===s.el&&(s.el=N.createElement(P(s.h,s.h[0]),this.options)),s);if(this._$AH?._$AD===e)this._$AH.p(i);else{const t=new M(e,this),s=t.u(this.options);t.p(i),this.T(s),this._$AH=t}}_$AC(t){let i=A.get(t.strings);return void 0===i&&A.set(t.strings,i=new N(t)),i}k(t){a(this._$AH)||(this._$AH=[],this._$AR());const i=this._$AH;let s,e=0;for(const h of t)e===i.length?i.push(s=new R(this.O(l()),this.O(l()),this,this.options)):s=i[e],s._$AI(h),e++;e<i.length&&(this._$AR(s&&s._$AB.nextSibling,e),i.length=e)}_$AR(t=this._$AA.nextSibling,i){for(this._$AP?.(!1,!0,i);t&&t!==this._$AB;){const i=t.nextSibling;t.remove(),t=i}}setConnected(t){void 0===this._$AM&&(this._$Cv=t,this._$AP?.(t))}}class k{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(t,i,s,e,h){this.type=1,this._$AH=E,this._$AN=void 0,this.element=t,this.name=i,this._$AM=e,this.options=h,s.length>2||\"\"!==s[0]||\"\"!==s[1]?(this._$AH=Array(s.length-1).fill(new String),this.strings=s):this._$AH=E}_$AI(t,i=this,s,e){const h=this.strings;let o=!1;if(void 0===h)t=S(this,t,i,0),o=!c(t)||t!==this._$AH&&t!==T,o&&(this._$AH=t);else{const e=t;let n,r;for(t=h[0],n=0;n<h.length-1;n++)r=S(this,e[s+n],i,n),r===T&&(r=this._$AH[n]),o||=!c(r)||r!==this._$AH[n],r===E?t=E:t!==E&&(t+=(r??\"\")+h[n+1]),this._$AH[n]=r}o&&!e&&this.j(t)}j(t){t===E?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??\"\")}}class H extends k{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===E?void 0:t}}class I extends k{constructor(){super(...arguments),this.type=4}j(t){this.element.toggleAttribute(this.name,!!t&&t!==E)}}class L extends k{constructor(t,i,s,e,h){super(t,i,s,e,h),this.type=5}_$AI(t,i=this){if((t=S(this,t,i,0)??E)===T)return;const s=this._$AH,e=t===E&&s!==E||t.capture!==s.capture||t.once!==s.once||t.passive!==s.passive,h=t!==E&&(s===E||e);e&&this.element.removeEventListener(this.name,this,s),h&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){\"function\"==typeof this._$AH?this._$AH.call(this.options?.host??this.element,t):this._$AH.handleEvent(t)}}class z{constructor(t,i,s){this.element=t,this.type=6,this._$AN=void 0,this._$AM=i,this.options=s}get _$AU(){return this._$AM._$AU}_$AI(t){S(this,t)}}const Z={M:e,P:h,A:o,C:1,L:V,R:M,D:u,V:S,I:R,H:k,N:I,U:L,B:H,F:z},j=t.litHtmlPolyfillSupport;j?.(N,R),(t.litHtmlVersions??=[]).push(\"3.2.1\");const B=(t,i,s)=>{const e=s?.renderBefore??i;let h=e._$litPart$;if(void 0===h){const t=s?.renderBefore??null;e._$litPart$=h=new R(i.insertBefore(l(),t),t,void 0,s??{})}return h._$AI(t),h};export{Z as _$LH,x as html,w as mathml,T as noChange,E as nothing,B as render,b as svg};\n//# sourceMappingURL=lit-html.js.map\n",
    "import{ReactiveElement as t}from\"@lit/reactive-element\";export*from\"@lit/reactive-element\";import{render as e,noChange as s}from\"lit-html\";export*from\"lit-html\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */class r extends t{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const t=super.createRenderRoot();return this.renderOptions.renderBefore??=t.firstChild,t}update(t){const s=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=e(s,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return s}}r._$litElement$=!0,r[\"finalized\"]=!0,globalThis.litElementHydrateSupport?.({LitElement:r});const i=globalThis.litElementPolyfillSupport;i?.({LitElement:r});const o={_$AK:(t,e,s)=>{t._$AK(e,s)},_$AL:t=>t._$AL};(globalThis.litElementVersions??=[]).push(\"4.1.1\");export{r as LitElement,o as _$LE};\n//# sourceMappingURL=lit-element.js.map\n",
    "/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nconst t=t=>(e,o)=>{void 0!==o?o.addInitializer((()=>{customElements.define(t,e)})):customElements.define(t,e)};export{t as customElement};\n//# sourceMappingURL=custom-element.js.map\n",
    "//\n//     ,ad888ba,                              88\n//    d8\"'    \"8b\n//   d8            88,dba,,adba,   ,aPP8A.A8  88\n//   Y8,           88    88    88  88     88  88\n//    Y8a.   .a8P  88    88    88  88,   ,88  88     (C)2024 Cmajor Software Ltd\n//     '\"Y888Y\"'   88    88    88  '\"8bbP\"Y8  88     https://cmajor.dev\n//                                           ,88\n//                                        888P\"\n//\n//  This file may be used under the terms of the ISC license:\n//\n//  Permission to use, copy, modify, and/or distribute this software for any purpose with or\n//  without fee is hereby granted, provided that the above copyright notice and this permission\n//  notice appear in all copies. THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL\n//  WARRANTIES WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\n//  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT, INDIRECT, OR\n//  CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS,\n//  WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN\n//  CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.\n\n\n/** This event listener management class allows listeners to be attached and\n *  removed from named event types.\n */\nexport class EventListenerList\n{\n    constructor()\n    {\n        this.listenersPerType = {};\n    }\n\n    /** Adds a listener for a specifc event type.\n     *  If the listener is already registered, this will simply add it again.\n     *  Each call to addEventListener() must be paired with a removeventListener()\n     *  call to remove it.\n     *\n     *  @param {string} type\n     */\n    addEventListener (type, listener)\n    {\n        if (type && listener)\n        {\n            const list = this.listenersPerType[type];\n\n            if (list)\n                list.push (listener);\n            else\n                this.listenersPerType[type] = [listener];\n        }\n    }\n\n    /** Removes a listener that was previously added for the given event type.\n     *  @param {string} type\n     */\n    removeEventListener (type, listener)\n    {\n        if (type && listener)\n        {\n            const list = this.listenersPerType[type];\n\n            if (list)\n            {\n                const i = list.indexOf (listener);\n\n                if (i >= 0)\n                    list.splice (i, 1);\n            }\n        }\n    }\n\n    /** Attaches a callback function that will be automatically unregistered\n     *  the first time it is invoked.\n     *\n     *  @param {string} type\n     */\n    addSingleUseListener (type, listener)\n    {\n        const l = message =>\n        {\n            this.removeEventListener (type, l);\n            listener?.(message);\n        };\n\n        this.addEventListener (type, l);\n    }\n\n    /** Synchronously dispatches an event object to all listeners\n     *  that are registered for the given type.\n     *\n     *  @param {string} type\n     */\n    dispatchEvent (type, event)\n    {\n        const list = this.listenersPerType[type];\n\n        if (list)\n            for (const listener of list)\n                listener?.(event);\n    }\n\n    /** Returns the number of listeners that are currently registered\n     *  for the given type of event.\n     *\n     *  @param {string} type\n     */\n    getNumListenersForType (type)\n    {\n        const list = this.listenersPerType[type];\n        return list ? list.length : 0;\n    }\n}\n",
    "//\n//     ,ad888ba,                              88\n//    d8\"'    \"8b\n//   d8            88,dba,,adba,   ,aPP8A.A8  88\n//   Y8,           88    88    88  88     88  88\n//    Y8a.   .a8P  88    88    88  88,   ,88  88     (C)2024 Cmajor Software Ltd\n//     '\"Y888Y\"'   88    88    88  '\"8bbP\"Y8  88     https://cmajor.dev\n//                                           ,88\n//                                        888P\"\n//\n//  This file may be used under the terms of the ISC license:\n//\n//  Permission to use, copy, modify, and/or distribute this software for any purpose with or\n//  without fee is hereby granted, provided that the above copyright notice and this permission\n//  notice appear in all copies. THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL\n//  WARRANTIES WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\n//  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT, INDIRECT, OR\n//  CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS,\n//  WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN\n//  CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.\n\n\nexport function getByte0 (message)     { return (message >> 16) & 0xff; }\nexport function getByte1 (message)     { return (message >> 8) & 0xff; }\nexport function getByte2 (message)     { return message & 0xff; }\n\nfunction isVoiceMessage (message, type)     { return ((message >> 16) & 0xf0) == type; }\nfunction get14BitValue (message)            { return getByte1 (message) | (getByte2 (message) << 7); }\n\nexport function getChannel0to15 (message)   { return getByte0 (message) & 0x0f; }\nexport function getChannel1to16 (message)   { return getChannel0to15 (message) + 1; }\n\nexport function getMessageSize (message)\n{\n    const mainGroupLengths = (3 << 0) | (3 << 2) | (3 << 4) | (3 << 6)\n                           | (2 << 8) | (2 << 10) | (3 << 12);\n\n    const lastGroupLengths = (1 <<  0) | (2 <<  2) | (3 <<  4) | (2 <<  6)\n                           | (1 <<  8) | (1 << 10) | (1 << 12) | (1 << 14)\n                           | (1 << 16) | (1 << 18) | (1 << 20) | (1 << 22)\n                           | (1 << 24) | (1 << 26) | (1 << 28) | (1 << 30);\n\n    const firstByte = getByte0 (message);\n    const group = (firstByte >> 4) & 7;\n\n    return (group != 7 ? (mainGroupLengths >> (2 * group))\n                       : (lastGroupLengths >> (2 * (firstByte & 15)))) & 3;\n}\n\nexport function isNoteOn  (message)                         { return isVoiceMessage (message, 0x90) && getVelocity (message) != 0; }\nexport function isNoteOff (message)                         { return isVoiceMessage (message, 0x80) || (isVoiceMessage (message, 0x90) && getVelocity (message) == 0); }\n\nexport function getNoteNumber (message)                     { return getByte1 (message); }\nexport function getVelocity (message)                       { return getByte2 (message); }\n\nexport function isProgramChange (message)                   { return isVoiceMessage (message, 0xc0); }\nexport function getProgramChangeNumber (message)            { return getByte1 (message); }\nexport function isPitchWheel (message)                      { return isVoiceMessage (message, 0xe0); }\nexport function getPitchWheelValue (message)                { return get14BitValue (message); }\nexport function isAftertouch (message)                      { return isVoiceMessage (message, 0xa0); }\nexport function getAfterTouchValue (message)                { return getByte2 (message); }\nexport function isChannelPressure (message)                 { return isVoiceMessage (message, 0xd0); }\nexport function getChannelPressureValue (message)           { return getByte1 (message); }\nexport function isController (message)                      { return isVoiceMessage (message, 0xb0); }\nexport function getControllerNumber (message)               { return getByte1 (message); }\nexport function getControllerValue (message)                { return getByte2 (message); }\nexport function isControllerNumber (message, number)        { return getByte1 (message) == number && isController (message); }\nexport function isAllNotesOff (message)                     { return isControllerNumber (message, 123); }\nexport function isAllSoundOff (message)                     { return isControllerNumber (message, 120); }\nexport function isQuarterFrame (message)                    { return getByte0 (message) == 0xf1; }\nexport function isClock (message)                           { return getByte0 (message) == 0xf8; }\nexport function isStart (message)                           { return getByte0 (message) == 0xfa; }\nexport function isContinue (message)                        { return getByte0 (message) == 0xfb; }\nexport function isStop (message)                            { return getByte0 (message) == 0xfc; }\nexport function isActiveSense (message)                     { return getByte0 (message) == 0xfe; }\nexport function isMetaEvent (message)                       { return getByte0 (message) == 0xff; }\nexport function isSongPositionPointer (message)             { return getByte0 (message) == 0xf2; }\nexport function getSongPositionPointerValue (message)       { return get14BitValue (message); }\n\nexport function getChromaticScaleIndex (note)               { return (note % 12) & 0xf; }\nexport function getOctaveNumber (note, octaveForMiddleC)    { return ((Math.floor (note / 12) + (octaveForMiddleC ? octaveForMiddleC : 3)) & 0xff) - 5; }\nexport function getNoteName (note)                          { const names = [\"C\", \"C#\", \"D\", \"Eb\", \"E\", \"F\", \"F#\", \"G\", \"G#\", \"A\", \"Bb\", \"B\"]; return names[getChromaticScaleIndex (note)]; }\nexport function getNoteNameWithSharps (note)                { const names = [\"C\", \"C#\", \"D\", \"Eb\", \"E\", \"F\", \"F#\", \"G\", \"G#\", \"A\", \"Bb\", \"B\"]; return names[getChromaticScaleIndex (note)]; }\nexport function getNoteNameWithFlats (note)                 { const names = [\"C\", \"Db\", \"D\", \"Eb\", \"E\", \"F\", \"Gb\", \"G\", \"Ab\", \"A\", \"Bb\", \"B\"]; return names[getChromaticScaleIndex (note)]; }\nexport function getNoteNameWithOctaveNumber (note)          { return getNoteName (note) + getOctaveNumber (note); }\nexport function isNatural (note)                            { const nats = [true, false, true, false, true, true, false, true, false, true, false, true]; return nats[getChromaticScaleIndex (note)]; }\nexport function isAccidental (note)                         { return ! isNatural (note); }\n\nexport function printHexMIDIData (message)\n{\n    const numBytes = getMessageSize (message);\n\n    if (numBytes == 0)\n        return \"[empty]\";\n\n    let s = \"\";\n\n    for (let i = 0; i < numBytes; ++i)\n    {\n        if (i != 0)  s += ' ';\n\n        const byte = message >> (16 - 8 * i) & 0xff;\n        s += \"0123456789abcdef\"[byte >> 4];\n        s += \"0123456789abcdef\"[byte & 15];\n    }\n\n    return s;\n}\n\nexport function getMIDIDescription (message)\n{\n    const channelText = \" Channel \" + getChannel1to16 (message);\n    function getNote (m)   { const s = getNoteNameWithOctaveNumber (getNoteNumber (message)); return s.length < 4 ? s + \" \" : s; };\n\n    if (isNoteOn (message))                return \"Note-On:  \"   + getNote (message) + channelText + \"  Velocity \" + getVelocity (message);\n    if (isNoteOff (message))               return \"Note-Off: \"   + getNote (message) + channelText + \"  Velocity \" + getVelocity (message);\n    if (isAftertouch (message))            return \"Aftertouch: \" + getNote (message) + channelText +  \": \" + getAfterTouchValue (message);\n    if (isPitchWheel (message))            return \"Pitch wheel: \" + getPitchWheelValue (message) + ' ' + channelText;\n    if (isChannelPressure (message))       return \"Channel pressure: \" + getChannelPressureValue (message) + ' ' + channelText;\n    if (isController (message))            return \"Controller:\" + channelText + \": \" + getControllerName (getControllerNumber (message)) + \" = \" + getControllerValue (message);\n    if (isProgramChange (message))         return \"Program change: \" + getProgramChangeNumber (message) + ' ' + channelText;\n    if (isAllNotesOff (message))           return \"All notes off:\" + channelText;\n    if (isAllSoundOff (message))           return \"All sound off:\" + channelText;\n    if (isQuarterFrame (message))          return \"Quarter-frame\";\n    if (isClock (message))                 return \"Clock\";\n    if (isStart (message))                 return \"Start\";\n    if (isContinue (message))              return \"Continue\";\n    if (isStop (message))                  return \"Stop\";\n    if (isMetaEvent (message))             return \"Meta-event: type \" + getByte1 (message);\n    if (isSongPositionPointer (message))   return \"Song Position: \" + getSongPositionPointerValue (message);\n\n    return printHexMIDIData (message);\n}\n\nexport function getControllerName (controllerNumber)\n{\n    if (controllerNumber < 128)\n    {\n        const controllerNames = [\n            \"Bank Select\",                  \"Modulation Wheel (coarse)\",      \"Breath controller (coarse)\",       undefined,\n            \"Foot Pedal (coarse)\",          \"Portamento Time (coarse)\",       \"Data Entry (coarse)\",              \"Volume (coarse)\",\n            \"Balance (coarse)\",             undefined,                        \"Pan position (coarse)\",            \"Expression (coarse)\",\n            \"Effect Control 1 (coarse)\",    \"Effect Control 2 (coarse)\",      undefined,                          undefined,\n            \"General Purpose Slider 1\",     \"General Purpose Slider 2\",       \"General Purpose Slider 3\",         \"General Purpose Slider 4\",\n            undefined,                      undefined,                        undefined,                          undefined,\n            undefined,                      undefined,                        undefined,                          undefined,\n            undefined,                      undefined,                        undefined,                          undefined,\n            \"Bank Select (fine)\",           \"Modulation Wheel (fine)\",        \"Breath controller (fine)\",         undefined,\n            \"Foot Pedal (fine)\",            \"Portamento Time (fine)\",         \"Data Entry (fine)\",                \"Volume (fine)\",\n            \"Balance (fine)\",               undefined,                        \"Pan position (fine)\",              \"Expression (fine)\",\n            \"Effect Control 1 (fine)\",      \"Effect Control 2 (fine)\",        undefined,                          undefined,\n            undefined,                      undefined,                        undefined,                          undefined,\n            undefined,                      undefined,                        undefined,                          undefined,\n            undefined,                      undefined,                        undefined,                          undefined,\n            undefined,                      undefined,                        undefined,                          undefined,\n            \"Hold Pedal\",                   \"Portamento\",                     \"Sustenuto Pedal\",                  \"Soft Pedal\",\n            \"Legato Pedal\",                 \"Hold 2 Pedal\",                   \"Sound Variation\",                  \"Sound Timbre\",\n            \"Sound Release Time\",           \"Sound Attack Time\",              \"Sound Brightness\",                 \"Sound Control 6\",\n            \"Sound Control 7\",              \"Sound Control 8\",                \"Sound Control 9\",                  \"Sound Control 10\",\n            \"General Purpose Button 1\",     \"General Purpose Button 2\",       \"General Purpose Button 3\",         \"General Purpose Button 4\",\n            undefined,                      undefined,                        undefined,                          undefined,\n            undefined,                      undefined,                        undefined,                          \"Reverb Level\",\n            \"Tremolo Level\",                \"Chorus Level\",                   \"Celeste Level\",                    \"Phaser Level\",\n            \"Data Button increment\",        \"Data Button decrement\",          \"Non-registered Parameter (fine)\",  \"Non-registered Parameter (coarse)\",\n            \"Registered Parameter (fine)\",  \"Registered Parameter (coarse)\",  undefined,                          undefined,\n            undefined,                      undefined,                        undefined,                          undefined,\n            undefined,                      undefined,                        undefined,                          undefined,\n            undefined,                      undefined,                        undefined,                          undefined,\n            undefined,                      undefined,                        undefined,                          undefined,\n            \"All Sound Off\",                \"All Controllers Off\",            \"Local Keyboard\",                   \"All Notes Off\",\n            \"Omni Mode Off\",                \"Omni Mode On\",                   \"Mono Operation\",                   \"Poly Operation\"\n        ];\n\n        const name = controllerNames[controllerNumber];\n\n        if (name)\n            return name;\n    }\n\n    return controllerNumber.toString();\n}\n",
    "//\n//     ,ad888ba,                              88\n//    d8\"'    \"8b\n//   d8            88,dba,,adba,   ,aPP8A.A8  88     The Cmajor Toolkit\n//   Y8,           88    88    88  88     88  88\n//    Y8a.   .a8P  88    88    88  88,   ,88  88     (C)2024 Cmajor Software Ltd\n//     '\"Y888Y\"'   88    88    88  '\"8bbP\"Y8  88     https://cmajor.dev\n//                                           ,88\n//                                        888P\"\n//\n//  The Cmajor project is subject to commercial or open-source licensing.\n//  You may use it under the terms of the GPLv3 (see www.gnu.org/licenses), or\n//  visit https://cmajor.dev to learn about our commercial licence options.\n//\n//  CMAJOR IS PROVIDED \"AS IS\" WITHOUT ANY WARRANTY, AND ALL WARRANTIES, WHETHER\n//  EXPRESSED OR IMPLIED, INCLUDING MERCHANTABILITY AND FITNESS FOR PURPOSE, ARE\n//  DISCLAIMED.\n\nimport * as midi from \"./cmaj-midi-helpers.js\"\n\n/**\n *  An general-purpose on-screen piano keyboard component that allows clicks or\n *  key-presses to be used to play things.\n *\n *  To receive events, you can attach \"note-down\" and \"note-up\" event listeners via\n *  the standard HTMLElement/EventTarget event system, e.g.\n *\n *  myKeyboardElement.addEventListener(\"note-down\", (note) => { ...handle note on... });\n *  myKeyboardElement.addEventListener(\"note-up\",   (note) => { ...handle note off... });\n *\n *  The `note` object will contain a `note` property with the MIDI note number.\n *  (And obviously you can remove them with removeEventListener)\n *\n *  Or, if you're connecting the keyboard to a PatchConnection, you can use the helper\n *  method attachToPatchConnection() to create and attach some suitable listeners.\n *\n */\nexport default class PianoKeyboard extends HTMLElement\n{\n    constructor ({ naturalNoteWidth,\n                   accidentalWidth,\n                   accidentalPercentageHeight,\n                   naturalNoteBorder,\n                   accidentalNoteBorder,\n                   pressedNoteColour } = {})\n    {\n        super();\n\n        this.naturalWidth = naturalNoteWidth || 20;\n        this.accidentalWidth = accidentalWidth || 12;\n        this.accidentalPercentageHeight = accidentalPercentageHeight || 66;\n        this.naturalBorder = naturalNoteBorder || \"2px solid #333\";\n        this.accidentalBorder = accidentalNoteBorder || \"2px solid #333\";\n        this.pressedColour = pressedNoteColour || \"#8ad\";\n\n        this.root = this.attachShadow({ mode: \"open\" });\n\n        this.root.addEventListener (\"mousedown\",   (event) => this.handleMouse (event, true, false) );\n        this.root.addEventListener (\"mouseup\",     (event) => this.handleMouse (event, false, true) );\n        this.root.addEventListener (\"mousemove\",   (event) => this.handleMouse (event, false, false) );\n        this.root.addEventListener (\"mouseenter\",  (event) => this.handleMouse (event, false, false) );\n        this.root.addEventListener (\"mouseout\",    (event) => this.handleMouse (event, false, false) );\n\n        this.addEventListener (\"keydown\",  (event) => this.handleKey (event, true));\n        this.addEventListener (\"keyup\",    (event) => this.handleKey (event, false));\n        this.addEventListener (\"focusout\", (event) => this.allNotesOff());\n\n        this.currentDraggedNote = -1;\n        this.currentExternalNotesOn = new Set();\n        this.currentKeyboardNotes = new Set();\n        this.currentPlayedNotes = new Set();\n        this.currentDisplayedNotes = new Set();\n        this.notes = [];\n        this.modifierKeys = 0;\n        this.currentTouches = new Map();\n\n        this.refreshHTML();\n\n        for (let child of this.root.children)\n        {\n            child.addEventListener (\"touchstart\", (event) => this.touchStart (event), {passive:false} );\n            child.addEventListener (\"touchend\",   (event) => this.touchEnd (event) );\n        }\n    }\n\n    static get observedAttributes()\n    {\n        return [\"root-note\", \"note-count\", \"key-map\"];\n    }\n\n    get config()\n    {\n        return {\n            rootNote: parseInt(this.getAttribute(\"root-note\") || \"36\"),\n            numNotes: parseInt(this.getAttribute(\"note-count\") || \"61\"),\n            keymap: this.getAttribute(\"key-map\") || \"KeyA KeyW KeyS KeyE KeyD KeyF KeyT KeyG KeyY KeyH KeyU KeyJ KeyK KeyO KeyL KeyP Semicolon\",\n        };\n    }\n\n    /** This attaches suitable listeners to make this keyboard control the given MIDI\n     *  endpoint of a PatchConnection object. Use detachPatchConnection() to remove\n     *  a connection later on.\n     *\n     *  @param {PatchConnection} patchConnection\n     *  @param {string} midiInputEndpointID\n     */\n    attachToPatchConnection (patchConnection, midiInputEndpointID)\n    {\n        const velocity = 100;\n\n        const callbacks = {\n            noteDown: e => patchConnection.sendMIDIInputEvent (midiInputEndpointID, 0x900000 | (e.detail.note << 8) | velocity),\n            noteUp:   e => patchConnection.sendMIDIInputEvent (midiInputEndpointID, 0x800000 | (e.detail.note << 8) | velocity),\n            midiIn:   e => this.handleExternalMIDI (e.message),\n            midiInputEndpointID\n        };\n\n        if (! this.callbacks)\n            this.callbacks = new Map();\n\n        this.callbacks.set (patchConnection, callbacks);\n\n        this.addEventListener (\"note-down\", callbacks.noteDown);\n        this.addEventListener (\"note-up\",   callbacks.noteUp);\n        patchConnection.addEndpointListener (midiInputEndpointID, callbacks.midiIn);\n    }\n\n    /** This removes the connection to a PatchConnection object that was previously attached\n     *  with attachToPatchConnection().\n     *\n     *  @param {PatchConnection} patchConnection\n     */\n    detachPatchConnection (patchConnection)\n    {\n        const callbacks = this.callbacks.get (patchConnection);\n\n        if (callbacks)\n        {\n            this.removeEventListener (\"note-down\", callbacks.noteDown);\n            this.removeEventListener (\"note-up\",   callbacks.noteUp);\n            patchConnection.removeEndpointListener (callbacks.midiInputEndpointID, callbacks.midiIn);\n        }\n\n        this.callbacks[patchConnection] = undefined;\n    }\n\n    //==============================================================================\n    /** Can be overridden to return the color to use for a note index */\n    getNoteColour (note)    { return undefined; }\n\n    /** Can be overridden to return the text label to draw on a note index */\n    getNoteLabel (note)     { return midi.getChromaticScaleIndex (note) == 0 ? midi.getNoteNameWithOctaveNumber (note) : \"\"; }\n\n    /** Clients should call this to deliver a MIDI message, which the keyboard will use to\n     *  highlight the notes that are currently playing.\n     */\n    handleExternalMIDI (message)\n    {\n        if (midi.isNoteOn (message))\n        {\n            const note = midi.getNoteNumber (message);\n            this.currentExternalNotesOn.add (note);\n            this.refreshActiveNoteElements();\n        }\n        else if (midi.isNoteOff (message))\n        {\n            const note = midi.getNoteNumber (message);\n            this.currentExternalNotesOn.delete (note);\n            this.refreshActiveNoteElements();\n        }\n    }\n\n    /** This method will be called when the user plays a note. The default behaviour is\n     *  to dispath an event, but you could override this if you needed to.\n    */\n    sendNoteOn (note)   { this.dispatchEvent (new CustomEvent('note-down', { detail: { note: note }})); }\n\n    /** This method will be called when the user releases a note. The default behaviour is\n     *  to dispath an event, but you could override this if you needed to.\n    */\n    sendNoteOff (note)  { this.dispatchEvent (new CustomEvent('note-up',   { detail: { note: note } })); }\n\n    /** Clients can call this to force all the notes to turn off, e.g. in a \"panic\". */\n    allNotesOff()\n    {\n        this.setDraggedNote (-1);\n        this.modifierKeys = 0;\n\n        for (let note of this.currentKeyboardNotes.values())\n            this.removeKeyboardNote (note);\n\n        this.currentExternalNotesOn.clear();\n        this.refreshActiveNoteElements();\n    }\n\n    setDraggedNote (newNote)\n    {\n        if (newNote != this.currentDraggedNote)\n        {\n            if (this.currentDraggedNote >= 0)\n                this.sendNoteOff (this.currentDraggedNote);\n\n            this.currentDraggedNote = newNote;\n\n            if (this.currentDraggedNote >= 0)\n                this.sendNoteOn (this.currentDraggedNote);\n\n            this.refreshActiveNoteElements();\n        }\n    }\n\n    addKeyboardNote (note)\n    {\n        if (! this.currentKeyboardNotes.has (note))\n        {\n            this.sendNoteOn (note);\n            this.currentKeyboardNotes.add (note);\n            this.refreshActiveNoteElements();\n        }\n    }\n\n    removeKeyboardNote (note)\n    {\n        if (this.currentKeyboardNotes.has (note))\n        {\n            this.sendNoteOff (note);\n            this.currentKeyboardNotes.delete (note);\n            this.refreshActiveNoteElements();\n        }\n    }\n\n    isNoteActive (note)\n    {\n        return note == this.currentDraggedNote\n            || this.currentExternalNotesOn.has (note)\n            || this.currentKeyboardNotes.has (note);\n    }\n\n    //==============================================================================\n    /** @private */\n    touchEnd (event)\n    {\n        for (const touch of event.changedTouches)\n        {\n            const note = this.currentTouches.get (touch.identifier);\n            this.currentTouches.delete (touch.identifier);\n            this.removeKeyboardNote (note);\n        }\n\n        event.preventDefault();\n    }\n\n    /** @private */\n    touchStart (event)\n    {\n        for (const touch of event.changedTouches)\n        {\n            const note = touch.target.id.substring (4);\n            this.currentTouches.set (touch.identifier, note);\n            this.addKeyboardNote (note);\n        }\n\n        event.preventDefault();\n    }\n\n    /** @private */\n    handleMouse (event, isDown, isUp)\n    {\n        if (isDown)\n            this.isDragging = true;\n\n        if (this.isDragging)\n        {\n            let newActiveNote = -1;\n\n            if (event.buttons != 0 && event.type != \"mouseout\")\n            {\n                const note = event.target.id.substring (4);\n\n                if (note !== undefined)\n                    newActiveNote = parseInt (note);\n            }\n\n            this.setDraggedNote (newActiveNote);\n\n            if (! isDown)\n                event.preventDefault();\n        }\n\n        if (isUp)\n            this.isDragging = false;\n    }\n\n    /** @private */\n    handleKey (event, isDown)\n    {\n        if (event.key == \"Meta\" || event.key == \"Alt\" || event.key == \"Control\" || event.key == \"Shift\")\n        {\n            this.modifierKeys += isDown ? 1 : -1;\n            return;\n        }\n\n        if (this.modifierKeys != 0)\n            return;\n\n        const config = this.config;\n        const index = config.keymap.split (\" \").indexOf (event.code);\n\n        if (index >= 0)\n        {\n            const note = Math.floor ((config.rootNote + (config.numNotes / 4) + 11) / 12) * 12 + index;\n\n            if (isDown)\n                this.addKeyboardNote (note);\n            else\n                this.removeKeyboardNote (note);\n\n            event.preventDefault();\n        }\n    }\n\n    /** @private */\n    refreshHTML()\n    {\n        this.root.innerHTML = `<style>${this.getCSS()}</style>${this.getNoteElements()}`;\n\n        for (let i = 0; i < 128; ++i)\n        {\n            const elem = this.shadowRoot.getElementById (`note${i.toString()}`);\n            this.notes.push ({ note: i, element: elem });\n        }\n\n        this.style.maxWidth = window.getComputedStyle (this).scrollWidth;\n    }\n\n    /** @private */\n    refreshActiveNoteElements()\n    {\n        for (let note of this.notes)\n        {\n            if (note.element)\n            {\n                if (this.isNoteActive (note.note))\n                    note.element.classList.add (\"active\");\n                else\n                    note.element.classList.remove (\"active\");\n            }\n        }\n    }\n\n    /** @private */\n    getAccidentalOffset (note)\n    {\n        let index = midi.getChromaticScaleIndex (note);\n\n        let negativeOffset = -this.accidentalWidth / 16;\n        let positiveOffset = 3 * this.accidentalWidth / 16;\n\n        const accOffset = this.naturalWidth - (this.accidentalWidth / 2);\n        const offsets = [ 0, negativeOffset, 0, positiveOffset, 0, 0, negativeOffset, 0, 0, 0, positiveOffset, 0 ];\n\n        return accOffset + offsets[index];\n    }\n\n    /** @private */\n    getNoteElements()\n    {\n        const config = this.config;\n        let naturals = \"\", accidentals = \"\";\n        let x = 0;\n\n        for (let i = 0; i < config.numNotes; ++i)\n        {\n            const note = config.rootNote + i;\n            const name = this.getNoteLabel (note);\n\n            if (midi.isNatural (note))\n            {\n                naturals += `<div class=\"natural-note note\" id=\"note${note}\" style=\" left: ${x + 1}px\"><p>${name}</p></div>`;\n            }\n            else\n            {\n                let accidentalOffset = this.getAccidentalOffset (note);\n                accidentals += `<div class=\"accidental-note note\" id=\"note${note}\" style=\"left: ${x + accidentalOffset}px\"></div>`;\n            }\n\n            if (midi.isNatural (note + 1) || i == config.numNotes - 1)\n                x += this.naturalWidth;\n        }\n\n        this.style.maxWidth = (x + 1) + \"px\";\n\n        return `<div tabindex=\"0\" class=\"note-holder\" style=\"width: ${x + 1}px;\">\n                ${naturals}\n                ${accidentals}\n                </div>`;\n    }\n\n    /** @private */\n    getCSS()\n    {\n        let extraColours = \"\";\n        const config = this.config;\n\n        for (let i = 0; i < config.numNotes; ++i)\n        {\n            const note = config.rootNote + i;\n            const colourOverride = this.getNoteColour (note);\n\n            if (colourOverride)\n                extraColours += `#note${note}:not(.active) { background: ${colourOverride}; }`;\n        }\n\n        return `\n            * {\n                box-sizing: border-box;\n                user-select: none;\n                -webkit-user-select: none;\n                -moz-user-select: none;\n                -ms-user-select: none;\n                margin: 0;\n                padding: 0;\n            }\n\n            :host {\n                display: block;\n                overflow: auto;\n                position: relative;\n            }\n\n            .natural-note {\n                position: absolute;\n                border: ${this.naturalBorder};\n                background: #fff;\n                width: ${this.naturalWidth}px;\n                height: 100%;\n\n                display: flex;\n                align-items: end;\n                justify-content: center;\n            }\n\n            p {\n                pointer-events: none;\n                text-align: center;\n                font-size: 0.7rem;\n                color: grey;\n            }\n\n            .accidental-note {\n                position: absolute;\n                top: 0;\n                border: ${this.accidentalBorder};\n                background: #333;\n                width: ${this.accidentalWidth}px;\n                height: ${this.accidentalPercentageHeight}%;\n            }\n\n            .note-holder {\n                position: relative;\n                height: 100%;\n            }\n\n            .active {\n                background: ${this.pressedColour};\n            }\n\n            ${extraColours}\n            `\n    }\n}\n",
    "//\n//     ,ad888ba,                              88\n//    d8\"'    \"8b\n//   d8            88,dba,,adba,   ,aPP8A.A8  88\n//   Y8,           88    88    88  88     88  88\n//    Y8a.   .a8P  88    88    88  88,   ,88  88     (C)2024 Cmajor Software Ltd\n//     '\"Y888Y\"'   88    88    88  '\"8bbP\"Y8  88     https://cmajor.dev\n//                                           ,88\n//                                        888P\"\n//\n//  This file may be used under the terms of the ISC license:\n//\n//  Permission to use, copy, modify, and/or distribute this software for any purpose with or\n//  without fee is hereby granted, provided that the above copyright notice and this permission\n//  notice appear in all copies. THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL\n//  WARRANTIES WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\n//  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT, INDIRECT, OR\n//  CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS,\n//  WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN\n//  CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.\n\nimport { PatchConnection } from \"./cmaj-patch-connection.js\";\n\n\n//==============================================================================\n/** A base class for parameter controls, which automatically connects to a\n *  PatchConnection to monitor a parameter and provides methods to modify it.\n */\nexport class ParameterControlBase  extends HTMLElement\n{\n    constructor()\n    {\n        super();\n\n        // prevent any clicks from focusing on this element\n        this.onmousedown = e => e.stopPropagation();\n    }\n\n    /** Attaches the control to a given PatchConnection and endpoint.\n     *\n     * @param {PatchConnection} patchConnection - the connection to connect to, or pass\n     *                                            undefined to disconnect the control.\n     * @param {Object} endpointInfo - the endpoint details, as provided by a PatchConnection\n     *                                in its status callback.\n     */\n    setEndpoint (patchConnection, endpointInfo)\n    {\n        this.detachListener();\n\n        this.patchConnection = patchConnection;\n        this.endpointInfo = endpointInfo;\n        this.defaultValue = endpointInfo.annotation?.init || endpointInfo.defaultValue || 0;\n\n        if (this.isConnected)\n            this.attachListener();\n    }\n\n    /** Override this method in a child class, and it will be called when the parameter value changes,\n     *  so you can update the GUI appropriately.\n     */\n    valueChanged (newValue) {}\n\n    /** Your GUI can call this when it wants to change the parameter value. */\n    setValue (value)     { this.patchConnection?.sendEventOrValue (this.endpointInfo.endpointID, value); }\n\n    /** Call this before your GUI begins a modification gesture.\n     *  You might for example call this if the user begins a mouse-drag operation.\n     */\n    beginGesture()       { this.patchConnection?.sendParameterGestureStart (this.endpointInfo.endpointID); }\n\n    /** Call this after your GUI finishes a modification gesture */\n    endGesture()         { this.patchConnection?.sendParameterGestureEnd (this.endpointInfo.endpointID); }\n\n    /** This calls setValue(), but sandwiches it between some start/end gesture calls.\n     *  You should use this to make sure a DAW correctly records automatiion for individual value changes\n     *  that are not part of a gesture.\n     */\n    setValueAsGesture (value)\n    {\n        this.beginGesture();\n        this.setValue (value);\n        this.endGesture();\n    }\n\n    /** Resets the parameter to its default value */\n    resetToDefault()\n    {\n        if (this.defaultValue !== null)\n            this.setValueAsGesture (this.defaultValue);\n    }\n\n    //==============================================================================\n    /** @private */\n    connectedCallback()\n    {\n        this.attachListener();\n    }\n\n    /** @protected */\n    disconnectedCallback()\n    {\n        this.detachListener();\n    }\n\n    /** @private */\n    detachListener()\n    {\n        if (this.listener)\n        {\n            this.patchConnection?.removeParameterListener?.(this.listener.endpointID, this.listener);\n            this.listener = undefined;\n        }\n    }\n\n    /** @private */\n    attachListener()\n    {\n        if (this.patchConnection && this.endpointInfo)\n        {\n            this.detachListener();\n\n            this.listener = newValue => this.valueChanged (newValue);\n            this.listener.endpointID = this.endpointInfo.endpointID;\n\n            this.patchConnection.addParameterListener (this.endpointInfo.endpointID, this.listener);\n            this.patchConnection.requestParameterValue (this.endpointInfo.endpointID);\n        }\n    }\n}\n\n//==============================================================================\n/** A simple rotary parameter knob control. */\nexport class Knob  extends ParameterControlBase\n{\n    constructor (patchConnection, endpointInfo)\n    {\n        super();\n        this.setEndpoint (patchConnection, endpointInfo);\n    }\n\n    setEndpoint (patchConnection, endpointInfo)\n    {\n        super.setEndpoint (patchConnection, endpointInfo);\n\n        this.innerHTML = \"\";\n        this.className = \"knob-container\";\n        const min = endpointInfo?.annotation?.min || 0;\n        const max = endpointInfo?.annotation?.max || 1;\n        const mid = endpointInfo?.annotation?.mid || undefined;\n\n        const createSvgElement = tag => window.document.createElementNS (\"http://www.w3.org/2000/svg\", tag);\n\n        const svg = createSvgElement (\"svg\");\n        svg.setAttribute (\"viewBox\", \"0 0 100 100\");\n\n        const trackBackground = createSvgElement (\"path\");\n        trackBackground.setAttribute (\"d\", \"M20,76 A 40 40 0 1 1 80 76\");\n        trackBackground.classList.add (\"knob-path\");\n        trackBackground.classList.add (\"knob-track-background\");\n\n        const maxKnobRotation = 132;\n        const isBipolar = min + max === 0;\n        const dashLength = isBipolar ? 251.5 : 184;\n        const valueOffset = isBipolar ? 0 : 132;\n        this.getDashOffset = val => dashLength - 184 / (maxKnobRotation * 2) * (val + valueOffset);\n\n        this.trackValue = createSvgElement (\"path\");\n\n        this.trackValue.setAttribute (\"d\", isBipolar ? \"M50.01,10 A 40 40 0 1 1 50 10\"\n                                                     : \"M20,76 A 40 40 0 1 1 80 76\");\n        this.trackValue.setAttribute (\"stroke-dasharray\", dashLength);\n        this.trackValue.classList.add (\"knob-path\");\n        this.trackValue.classList.add (\"knob-track-value\");\n\n        this.dial = document.createElement (\"div\");\n        this.dial.className = \"knob-dial\";\n\n        const dialTick = document.createElement (\"div\");\n        dialTick.className = \"knob-dial-tick\";\n        this.dial.appendChild (dialTick);\n\n        svg.appendChild (trackBackground);\n        svg.appendChild (this.trackValue);\n\n        this.appendChild (svg);\n        this.appendChild (this.dial);\n\n        const remap = (source, sourceFrom, sourceTo, targetFrom, targetTo) =>\n                        (targetFrom + (source - sourceFrom) * (targetTo - targetFrom) / (sourceTo - sourceFrom));\n\n        const toValue = (knobRotation) =>\n        {\n            if (mid > min && mid < max)\n            {\n                const normalisedKnob = remap (knobRotation, -maxKnobRotation, maxKnobRotation, 0, 1);\n                const range = max - min;\n                const power = Math.log ((mid - min) / (range)) / Math.log (0.5);\n\n                return min + range * Math.pow (normalisedKnob, power);\n            }\n            else\n            {\n                return remap (knobRotation, -maxKnobRotation, maxKnobRotation, min, max);\n            }\n        };\n\n        this.toRotation = (value) =>\n        {\n            if (mid > min && mid < max)\n            {\n                const range = max - min;\n                const power = Math.log ((mid - min) / (range)) / Math.log (0.5);\n\n                const normalisedKnob = Math.pow ((value - min) / range, 1 / power);\n\n                return remap (normalisedKnob, 0, 1, -maxKnobRotation, maxKnobRotation);\n            }\n            else\n            {\n                return remap (value, min, max, -maxKnobRotation, maxKnobRotation);\n            }\n        };\n\n        this.rotation = this.toRotation (this.defaultValue);\n        this.setRotation (this.rotation, true);\n\n        const onMouseMove = (event) =>\n        {\n            event.preventDefault(); // avoid scrolling whilst dragging\n\n            const nextRotation = (rotation, delta) =>\n            {\n                const clamp = (v, min, max) => Math.min (Math.max (v, min), max);\n                return clamp (rotation - delta, -maxKnobRotation, maxKnobRotation);\n            };\n\n            const workaroundBrowserIncorrectlyCalculatingMovementY = event.movementY === event.screenY;\n            const movementY = workaroundBrowserIncorrectlyCalculatingMovementY ? event.screenY - this.previousScreenY\n                                                                               : event.movementY;\n            this.previousScreenY = event.screenY;\n\n            const speedMultiplier = event.shiftKey ? 0.25 : 1.5;\n            this.accumulatedRotation = nextRotation (this.accumulatedRotation, movementY * speedMultiplier);\n            this.setValue (toValue (this.accumulatedRotation));\n        };\n\n        const onMouseUp = (event) =>\n        {\n            this.previousScreenY = undefined;\n            this.accumulatedRotation = undefined;\n            window.removeEventListener (\"mousemove\", onMouseMove);\n            window.removeEventListener (\"mouseup\", onMouseUp);\n            this.endGesture();\n        };\n\n        const onMouseDown = (event) =>\n        {\n            this.previousScreenY = event.screenY;\n            this.accumulatedRotation = this.rotation;\n            this.beginGesture();\n            window.addEventListener (\"mousemove\", onMouseMove);\n            window.addEventListener (\"mouseup\", onMouseUp);\n            event.preventDefault();\n        };\n\n        const onTouchStart = (event) =>\n        {\n            this.previousClientY = event.changedTouches[0].clientY;\n            this.accumulatedRotation = this.rotation;\n            this.touchIdentifier = event.changedTouches[0].identifier;\n            this.beginGesture();\n            window.addEventListener (\"touchmove\", onTouchMove);\n            window.addEventListener (\"touchend\", onTouchEnd);\n            event.preventDefault();\n        };\n\n        const onTouchMove = (event) =>\n        {\n            for (const touch of event.changedTouches)\n            {\n                if (touch.identifier == this.touchIdentifier)\n                {\n                    const nextRotation = (rotation, delta) =>\n                    {\n                        const clamp = (v, min, max) => Math.min (Math.max (v, min), max);\n                        return clamp (rotation - delta, -maxKnobRotation, maxKnobRotation);\n                    };\n\n                    const movementY = touch.clientY - this.previousClientY;\n                    this.previousClientY = touch.clientY;\n\n                    const speedMultiplier = event.shiftKey ? 0.25 : 1.5;\n                    this.accumulatedRotation = nextRotation (this.accumulatedRotation, movementY * speedMultiplier);\n                    this.setValue (toValue (this.accumulatedRotation));\n                }\n            }\n        };\n\n        const onTouchEnd = (event) =>\n        {\n            this.previousClientY = undefined;\n            this.accumulatedRotation = undefined;\n            window.removeEventListener (\"touchmove\", onTouchMove);\n            window.removeEventListener (\"touchend\", onTouchEnd);\n            this.endGesture();\n        };\n\n        this.addEventListener (\"mousedown\", onMouseDown);\n        this.addEventListener (\"dblclick\", () => this.resetToDefault());\n        this.addEventListener ('touchstart', onTouchStart);\n    }\n\n    /** Returns true if this type of control is suitable for the given endpoint info */\n    static canBeUsedFor (endpointInfo)\n    {\n        return endpointInfo.purpose === \"parameter\";\n    }\n\n    /** @override */\n    valueChanged (newValue)       { this.setRotation (this.toRotation (newValue), false); }\n\n    /** Returns a string version of the given value */\n    getDisplayValue (v)           { return toFloatDisplayValueWithUnit (v, this.endpointInfo); }\n\n    /** @private */\n    setRotation (degrees, force)\n    {\n        if (force || this.rotation !== degrees)\n        {\n            this.rotation = degrees;\n            this.trackValue.setAttribute (\"stroke-dashoffset\", this.getDashOffset (this.rotation));\n            this.dial.style.transform = `translate(-50%,-50%) rotate(${degrees}deg)`;\n        }\n    }\n\n    /** @private */\n    static getCSS()\n    {\n        return `\n        .knob-container {\n            --knob-track-background-color: var(--background);\n            --knob-track-value-color: var(--foreground);\n\n            --knob-dial-border-color: var(--foreground);\n            --knob-dial-background-color: var(--background);\n            --knob-dial-tick-color: var(--foreground);\n\n            position: relative;\n            display: inline-block;\n            height: 5rem;\n            width: 5rem;\n            margin: 0;\n            padding: 0;\n        }\n\n        .knob-path {\n            fill: none;\n            stroke-linecap: round;\n            stroke-width: 0.15rem;\n        }\n\n        .knob-track-background {\n            stroke: var(--knob-track-background-color);\n        }\n\n        .knob-track-value {\n            stroke: var(--knob-track-value-color);\n        }\n\n        .knob-dial {\n            position: absolute;\n            text-align: center;\n            height: 60%;\n            width: 60%;\n            top: 50%;\n            left: 50%;\n            border: 0.15rem solid var(--knob-dial-border-color);\n            border-radius: 100%;\n            box-sizing: border-box;\n            transform: translate(-50%,-50%);\n            background-color: var(--knob-dial-background-color);\n        }\n\n        .knob-dial-tick {\n            position: absolute;\n            display: inline-block;\n\n            height: 1rem;\n            width: 0.15rem;\n            background-color: var(--knob-dial-tick-color);\n        }`;\n    }\n}\n\n//==============================================================================\n/** A boolean switch control */\nexport class Switch  extends ParameterControlBase\n{\n    constructor (patchConnection, endpointInfo)\n    {\n        super();\n        this.setEndpoint (patchConnection, endpointInfo);\n    }\n\n    setEndpoint (patchConnection, endpointInfo)\n    {\n        super.setEndpoint (patchConnection, endpointInfo);\n\n        const outer = document.createElement (\"div\");\n        outer.classList = \"switch-outline\";\n\n        const inner = document.createElement (\"div\");\n        inner.classList = \"switch-thumb\";\n\n        this.innerHTML = \"\";\n        this.currentValue = this.defaultValue > 0.5;\n        this.valueChanged (this.currentValue);\n        this.classList.add (\"switch-container\");\n\n        outer.appendChild (inner);\n        this.appendChild (outer);\n        this.addEventListener (\"click\", () => this.setValueAsGesture (this.currentValue ? 0 : 1.0));\n    }\n\n    /** Returns true if this type of control is suitable for the given endpoint info */\n    static canBeUsedFor (endpointInfo)\n    {\n        return endpointInfo.purpose === \"parameter\"\n                && endpointInfo.annotation?.boolean;\n    }\n\n    /** @override */\n    valueChanged (newValue)\n    {\n        const b = newValue > 0.5;\n        this.currentValue = b;\n        this.classList.remove (! b ? \"switch-on\" : \"switch-off\");\n        this.classList.add (b ? \"switch-on\" : \"switch-off\");\n    }\n\n    /** Returns a string version of the given value */\n    getDisplayValue (v)   { return `${v > 0.5 ? \"On\" : \"Off\"}`; }\n\n    /** @private */\n    static getCSS()\n    {\n        return `\n        .switch-container {\n            --switch-outline-color: var(--foreground);\n            --switch-thumb-color: var(--foreground);\n            --switch-on-background-color: var(--background);\n            --switch-off-background-color: var(--background);\n\n            position: relative;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            height: 100%;\n            width: 100%;\n            margin: 0;\n            padding: 0;\n        }\n\n        .switch-outline {\n            position: relative;\n            display: inline-block;\n            height: 1.25rem;\n            width: 2.5rem;\n            border-radius: 10rem;\n            box-shadow: 0 0 0 0.15rem var(--switch-outline-color);\n            transition: background-color 0.1s cubic-bezier(0.5, 0, 0.2, 1);\n        }\n\n        .switch-thumb {\n            position: absolute;\n            top: 50%;\n            left: 50%;\n            transform: translate(-50%,-50%);\n            height: 1rem;\n            width: 1rem;\n            background-color: var(--switch-thumb-color);\n            border-radius: 100%;\n            transition: left 0.1s cubic-bezier(0.5, 0, 0.2, 1);\n        }\n\n        .switch-off .switch-thumb {\n            left: 25%;\n            background: none;\n            border: var(--switch-thumb-color) solid 0.1rem;\n            height: 0.8rem;\n            width: 0.8rem;\n        }\n        .switch-on .switch-thumb {\n            left: 75%;\n        }\n\n        .switch-off .switch-outline {\n            background-color: var(--switch-on-background-color);\n        }\n        .switch-on .switch-outline {\n            background-color: var(--switch-off-background-color);\n        }`;\n    }\n}\n\n//==============================================================================\nfunction toFloatDisplayValueWithUnit (v, endpointInfo)\n{\n    return `${v.toFixed (2)} ${endpointInfo.annotation?.unit ?? \"\"}`;\n}\n\n//==============================================================================\n/** A control that allows an item to be selected from a drop-down list of options */\nexport class Options  extends ParameterControlBase\n{\n    constructor (patchConnection, endpointInfo)\n    {\n        super();\n        this.setEndpoint (patchConnection, endpointInfo);\n    }\n\n    setEndpoint (patchConnection, endpointInfo)\n    {\n        super.setEndpoint (patchConnection, endpointInfo);\n\n        const toValue = (min, step, index) => min + (step * index);\n        const toStepCount = count => count > 0 ? count - 1 : 1;\n\n        const { min, max, options } = (() =>\n        {\n            if (Options.hasTextOptions (endpointInfo))\n            {\n                const optionList = endpointInfo.annotation.text.split (\"|\");\n                const stepCount = toStepCount (optionList.length);\n                let min = 0, max = stepCount, step = 1;\n\n                if (endpointInfo.annotation.min != null && endpointInfo.annotation.max != null)\n                {\n                    min = endpointInfo.annotation.min;\n                    max = endpointInfo.annotation.max;\n                    step = (max - min) / stepCount;\n                }\n\n                const options = optionList.map ((text, index) => ({ value: toValue (min, step, index), text }));\n\n                return { min, max, options };\n            }\n\n            if (Options.isExplicitlyDiscrete (endpointInfo))\n            {\n                const step = endpointInfo.annotation.step;\n\n                const min = endpointInfo.annotation?.min || 0;\n                const max = endpointInfo.annotation?.max || 1;\n\n                const numDiscreteOptions = (((max - min) / step) | 0) + 1;\n\n                const options = new Array (numDiscreteOptions);\n                for (let i = 0; i < numDiscreteOptions; ++i)\n                {\n                    const value = toValue (min, step, i);\n                    options[i] = { value, text: toFloatDisplayValueWithUnit (value, endpointInfo) };\n                }\n\n                return { min, max, options };\n            }\n        })();\n\n        this.options = options;\n\n        const stepCount = toStepCount (this.options.length);\n        const normalise = value => (value - min) / (max - min);\n        this.toIndex = value => Math.min (stepCount, normalise (value) * this.options.length) | 0;\n\n        this.innerHTML = \"\";\n\n        this.select = document.createElement (\"select\");\n\n        for (const option of this.options)\n        {\n            const optionElement = document.createElement (\"option\");\n            optionElement.innerText = option.text;\n            this.select.appendChild (optionElement);\n        }\n\n        this.selectedIndex = this.toIndex (this.defaultValue);\n\n        this.select.addEventListener (\"change\", (e) =>\n        {\n            const newIndex = e.target.selectedIndex;\n\n            // prevent local state change. the caller will update us when the backend actually applies the update\n            e.target.selectedIndex = this.selectedIndex;\n\n            this.setValueAsGesture (this.options[newIndex].value)\n        });\n\n        this.valueChanged (this.selectedIndex);\n\n        this.className = \"select-container\";\n        this.appendChild (this.select);\n\n        const icon = document.createElement (\"span\");\n        icon.className = \"select-icon\";\n        this.appendChild (icon);\n    }\n\n    /** Returns true if this type of control is suitable for the given endpoint info */\n    static canBeUsedFor (endpointInfo)\n    {\n        return endpointInfo.purpose === \"parameter\"\n                && (this.hasTextOptions (endpointInfo) || this.isExplicitlyDiscrete (endpointInfo));\n    }\n\n    /** @override */\n    valueChanged (newValue)\n    {\n        const index = this.toIndex (newValue);\n        this.selectedIndex = index;\n        this.select.selectedIndex = index;\n    }\n\n    /** Returns a string version of the given value */\n    getDisplayValue (v)    { return this.options[this.toIndex(v)].text; }\n\n    /** @private */\n    static hasTextOptions (endpointInfo)\n    {\n        return endpointInfo.annotation?.text?.split?.(\"|\").length > 1\n    }\n\n    /** @private */\n    static isExplicitlyDiscrete (endpointInfo)\n    {\n        return endpointInfo.annotation?.discrete && endpointInfo.annotation?.step > 0;\n    }\n\n    /** @private */\n    static getCSS()\n    {\n        return `\n        .select-container {\n            position: relative;\n            display: block;\n            font-size: 0.8rem;\n            width: 100%;\n            color: var(--foreground);\n            border: 0.15rem solid var(--foreground);\n            border-radius: 0.6rem;\n            margin: 0;\n            padding: 0;\n        }\n\n        select {\n            background: none;\n            appearance: none;\n            -webkit-appearance: none;\n            font-family: inherit;\n            font-size: 0.8rem;\n\n            overflow: hidden;\n            text-overflow: ellipsis;\n\n            padding: 0 1.5rem 0 0.6rem;\n\n            outline: none;\n            color: var(--foreground);\n            height: 2rem;\n            box-sizing: border-box;\n            margin: 0;\n            border: none;\n\n            width: 100%;\n        }\n\n        select option {\n            background: var(--background);\n            color: var(--foreground);\n        }\n\n        .select-icon {\n            position: absolute;\n            right: 0.3rem;\n            top: 0.5rem;\n            pointer-events: none;\n            background-color: var(--foreground);\n            width: 1.4em;\n            height: 1.4em;\n            mask: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath d='M17,9.17a1,1,0,0,0-1.41,0L12,12.71,8.46,9.17a1,1,0,0,0-1.41,0,1,1,0,0,0,0,1.42l4.24,4.24a1,1,0,0,0,1.42,0L17,10.59A1,1,0,0,0,17,9.17Z'/%3E%3C/svg%3E\");\n            mask-repeat: no-repeat;\n            -webkit-mask: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath d='M17,9.17a1,1,0,0,0-1.41,0L12,12.71,8.46,9.17a1,1,0,0,0-1.41,0,1,1,0,0,0,0,1.42l4.24,4.24a1,1,0,0,0,1.42,0L17,10.59A1,1,0,0,0,17,9.17Z'/%3E%3C/svg%3E\");\n            -webkit-mask-repeat: no-repeat;\n        }`;\n    }\n}\n\n//==============================================================================\n/** A control which wraps a child control, adding a label and value display box below it */\nexport class LabelledControlHolder  extends ParameterControlBase\n{\n    constructor (patchConnection, endpointInfo, childControl)\n    {\n        super();\n        this.childControl = childControl;\n        this.setEndpoint (patchConnection, endpointInfo);\n    }\n\n    setEndpoint (patchConnection, endpointInfo)\n    {\n        super.setEndpoint (patchConnection, endpointInfo);\n\n        this.innerHTML = \"\";\n        this.className = \"labelled-control\";\n\n        const centeredControl = document.createElement (\"div\");\n        centeredControl.className = \"labelled-control-centered-control\";\n\n        centeredControl.appendChild (this.childControl);\n\n        const titleValueHoverContainer = document.createElement (\"div\");\n        titleValueHoverContainer.className = \"labelled-control-label-container\";\n\n        const nameText = document.createElement (\"div\");\n        nameText.classList.add (\"labelled-control-name\");\n        nameText.innerText = endpointInfo.annotation?.name || endpointInfo.name || endpointInfo.endpointID || \"\";\n\n        this.valueText = document.createElement (\"div\");\n        this.valueText.classList.add (\"labelled-control-value\");\n\n        titleValueHoverContainer.appendChild (nameText);\n        titleValueHoverContainer.appendChild (this.valueText);\n\n        this.appendChild (centeredControl);\n        this.appendChild (titleValueHoverContainer);\n    }\n\n    /** @override */\n    valueChanged (newValue)\n    {\n        this.valueText.innerText = this.childControl?.getDisplayValue (newValue);\n    }\n\n    /** @private */\n    static getCSS()\n    {\n        return `\n        .labelled-control {\n            --labelled-control-font-color: var(--foreground);\n            --labelled-control-font-size: 0.8rem;\n\n            position: relative;\n            display: inline-block;\n            margin: 0 0.4rem 0.4rem;\n            vertical-align: top;\n            text-align: left;\n            padding: 0;\n        }\n\n        .labelled-control-centered-control {\n            position: relative;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n\n            width: 5.5rem;\n            height: 5rem;\n        }\n\n        .labelled-control-label-container {\n            position: relative;\n            display: block;\n            max-width: 5.5rem;\n            margin: -0.4rem auto 0.4rem;\n            text-align: center;\n            font-size: var(--labelled-control-font-size);\n            color: var(--labelled-control-font-color);\n            cursor: default;\n        }\n\n        .labelled-control-name {\n            overflow: hidden;\n            text-overflow: ellipsis;\n        }\n\n        .labelled-control-value {\n            position: absolute;\n            top: 0;\n            left: 0;\n            right: 0;\n            overflow: hidden;\n            text-overflow: ellipsis;\n            opacity: 0;\n        }\n\n        .labelled-control:hover .labelled-control-name,\n        .labelled-control:active .labelled-control-name {\n            opacity: 0;\n        }\n        .labelled-control:hover .labelled-control-value,\n        .labelled-control:active .labelled-control-value {\n            opacity: 1;\n        }`;\n    }\n}\n\nif (! window.customElements.get (\"cmaj-knob-control\"))             window.customElements.define (\"cmaj-knob-control\", Knob);\nif (! window.customElements.get (\"cmaj-switch-control\"))           window.customElements.define (\"cmaj-switch-control\", Switch);\nif (! window.customElements.get (\"cmaj-options-control\"))          window.customElements.define (\"cmaj-options-control\", Options);\nif (! window.customElements.get (\"cmaj-labelled-control-holder\"))  window.customElements.define (\"cmaj-labelled-control-holder\", LabelledControlHolder);\n\n\n//==============================================================================\n/** Fetches all the CSS for the controls defined in this module */\nexport function getAllCSS()\n{\n    return `\n        ${Options.getCSS()}\n        ${Knob.getCSS()}\n        ${Switch.getCSS()}\n        ${LabelledControlHolder.getCSS()}`;\n}\n\n//==============================================================================\n/** Creates a suitable control for the given endpoint.\n *\n *  @param {PatchConnection} patchConnection - the connection to connect to\n *  @param {Object} endpointInfo - the endpoint details, as provided by a PatchConnection\n *                                 in its status callback.\n*/\nexport function createControl (patchConnection, endpointInfo)\n{\n    if (Switch.canBeUsedFor (endpointInfo))\n        return new Switch (patchConnection, endpointInfo);\n\n    if (Options.canBeUsedFor (endpointInfo))\n        return new Options (patchConnection, endpointInfo);\n\n    if (Knob.canBeUsedFor (endpointInfo))\n        return new Knob (patchConnection, endpointInfo);\n\n    return undefined;\n}\n\n//==============================================================================\n/** Creates a suitable labelled control for the given endpoint.\n *\n *  @param {PatchConnection} patchConnection - the connection to connect to\n *  @param {Object} endpointInfo - the endpoint details, as provided by a PatchConnection\n *                                 in its status callback.\n*/\nexport function createLabelledControl (patchConnection, endpointInfo)\n{\n    const control = createControl (patchConnection, endpointInfo);\n\n    if (control)\n        return new LabelledControlHolder (patchConnection, endpointInfo, control);\n\n    return undefined;\n}\n\n//==============================================================================\n/** Takes a patch connection and its current status object, and tries to create\n *  a control for the given endpoint ID.\n *\n *  @param {PatchConnection} patchConnection - the connection to connect to\n *  @param {Object} status - the connection's current status\n *  @param {string} endpointID - the endpoint you'd like to control\n */\nexport function createLabelledControlForEndpointID (patchConnection, status, endpointID)\n{\n    for (const endpointInfo of status?.details?.inputs)\n        if (endpointInfo.endpointID == endpointID)\n            return createLabelledControl (patchConnection, endpointInfo);\n\n    return undefined;\n}\n",
    "//\n//     ,ad888ba,                              88\n//    d8\"'    \"8b\n//   d8            88,dba,,adba,   ,aPP8A.A8  88\n//   Y8,           88    88    88  88     88  88\n//    Y8a.   .a8P  88    88    88  88,   ,88  88     (C)2024 Cmajor Software Ltd\n//     '\"Y888Y\"'   88    88    88  '\"8bbP\"Y8  88     https://cmajor.dev\n//                                           ,88\n//                                        888P\"\n//\n//  This file may be used under the terms of the ISC license:\n//\n//  Permission to use, copy, modify, and/or distribute this software for any purpose with or\n//  without fee is hereby granted, provided that the above copyright notice and this permission\n//  notice appear in all copies. THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL\n//  WARRANTIES WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\n//  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT, INDIRECT, OR\n//  CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS,\n//  WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN\n//  CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.\n\nimport * as Controls from \"./cmaj-parameter-controls.js\"\n\n//==============================================================================\n/** A simple, generic view which can control any type of patch */\nclass GenericPatchView extends HTMLElement\n{\n    /** Creates a view for a patch.\n     *  @param {PatchConnection} patchConnection - the connection to the target patch\n     */\n    constructor (patchConnection)\n    {\n        super();\n\n        this.patchConnection = patchConnection;\n\n        this.statusListener = status =>\n        {\n            this.status = status;\n            this.createControlElements();\n        };\n\n        this.attachShadow ({ mode: \"open\" });\n        this.shadowRoot.innerHTML = this.getHTML();\n\n        this.titleElement      = this.shadowRoot.getElementById (\"patch-title\");\n        this.parametersElement = this.shadowRoot.getElementById (\"patch-parameters\");\n    }\n\n    /** This is picked up by some of our wrapper code to know whether it makes\n     *  sense to put a title bar/logo above the GUI.\n     */\n    hasOwnTitleBar()\n    {\n        return true;\n    }\n\n    //==============================================================================\n    /** @private */\n    connectedCallback()\n    {\n        this.patchConnection.addStatusListener (this.statusListener);\n        this.patchConnection.requestStatusUpdate();\n    }\n\n    /** @private */\n    disconnectedCallback()\n    {\n        this.patchConnection.removeStatusListener (this.statusListener);\n    }\n\n    /** @private */\n    createControlElements()\n    {\n        this.parametersElement.innerHTML = \"\";\n        this.titleElement.innerText = this.status?.manifest?.name ?? \"Cmajor\";\n\n        if (this.status?.details?.inputs)\n        {\n            for (const endpointInfo of this.status.details.inputs)\n            {\n                if (! endpointInfo.annotation?.hidden)\n                {\n                    const control = Controls.createLabelledControl (this.patchConnection, endpointInfo);\n\n                    if (control)\n                        this.parametersElement.appendChild (control);\n                }\n            }\n        }\n    }\n\n    /** @private */\n    getHTML()\n    {\n        const baseUrl = import.meta.url;\n\n        return `\n            <style>\n            * {\n                box-sizing: border-box;\n                user-select: none;\n                -webkit-user-select: none;\n                -moz-user-select: none;\n                -ms-user-select: none;\n                font-family: Avenir, 'Avenir Next LT Pro', Montserrat, Corbel, 'URW Gothic', source-sans-pro, sans-serif;\n                font-size: 0.9rem;\n            }\n\n            :host {\n                --header-height: 2.5rem;\n                --foreground: #ffffff;\n                --background: #191b1b;\n\n                display: block;\n                height: 100%;\n                background-color: var(--background);\n            }\n\n            .main {\n                background: var(--background);\n                height: 100%;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n            }\n\n            .header {\n                width: 100%;\n                height: var(--header-height);\n                border-bottom: 0.1rem solid var(--foreground);\n                display: flex;\n                justify-content: space-between;\n                align-items: center;\n                display: none;\n            }\n\n            #patch-title {\n                color: var(--foreground);\n                text-overflow: ellipsis;\n                white-space: nowrap;\n                overflow: hidden;\n                cursor: default;\n                font-size: 140%;\n            }\n\n            .logo {\n                flex: 1;\n                opacity: 0;\n                height: 80%;\n                margin-left: 0.3rem;\n                margin-right: 0.3rem;\n                background-color: var(--foreground);\n                mask: url(${baseUrl}/../assets/cmajor-logo.svg);\n                mask-repeat: no-repeat;\n                -webkit-mask: url(${baseUrl}/../assets/cmajor-logo.svg);\n                -webkit-mask-repeat: no-repeat;\n                min-width: 6.25rem;\n            }\n\n            .header-filler {\n                flex: 1;\n            }\n\n            #patch-parameters {\n                max-height: 100%;\n                overflow: auto;\n                padding: 1rem;\n                text-align: center;\n                \n            }\n\n            ${Controls.getAllCSS()}\n\n            </style>\n\n            <div class=\"main\">\n              <div class=\"header\">\n                <span class=\"logo\"></span>\n                <h2 id=\"patch-title\"></h2>\n                <div class=\"header-filler\"></div>\n              </div>\n              <div id=\"patch-parameters\"></div>\n            </div>`;\n    }\n}\n\nif (! window.customElements.get (\"cmaj-generic-patch-view\")) window.customElements.define (\"cmaj-generic-patch-view\", GenericPatchView);\n\n//==============================================================================\n/** Creates a generic view element which can be used to control any patch.\n *  @param {PatchConnection} patchConnection - the connection to the target patch\n */\nexport default function createPatchView (patchConnection)\n{\n    return new GenericPatchView (patchConnection);\n}\n",
    "//\n//     ,ad888ba,                              88\n//    d8\"'    \"8b\n//   d8            88,dba,,adba,   ,aPP8A.A8  88\n//   Y8,           88    88    88  88     88  88\n//    Y8a.   .a8P  88    88    88  88,   ,88  88     (C)2024 Cmajor Software Ltd\n//     '\"Y888Y\"'   88    88    88  '\"8bbP\"Y8  88     https://cmajor.dev\n//                                           ,88\n//                                        888P\"\n//\n//  This file may be used under the terms of the ISC license:\n//\n//  Permission to use, copy, modify, and/or distribute this software for any purpose with or\n//  without fee is hereby granted, provided that the above copyright notice and this permission\n//  notice appear in all copies. THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL\n//  WARRANTIES WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\n//  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT, INDIRECT, OR\n//  CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS,\n//  WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN\n//  CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.\n\nimport { EventListenerList } from \"./cmaj-event-listener-list.js\"\nimport * as midi from \"./cmaj-midi-helpers.js\"\nimport PianoKeyboard from \"./cmaj-piano-keyboard.js\"\nimport GenericPatchView from \"./cmaj-generic-patch-view.js\"\nimport * as ParameterControls from \"./cmaj-parameter-controls.js\"\n\n//==============================================================================\n/** This class implements the API and much of the logic for communicating with\n *  an instance of a patch that is running.\n */\nexport class PatchConnection  extends EventListenerList\n{\n    constructor()\n    {\n        super();\n    }\n\n    /** Returns the current Cmajor version */\n    // getCmajorVersion()\n    // {\n    //     const version = import (\"./cmaj-version.js\");\n    //     return version.getCmajorVersion();\n    // }\n\n    //==============================================================================\n    // Status-handling methods:\n\n    /** Calling this will trigger an asynchronous callback to any status listeners with the\n     *  patch's current state. Use addStatusListener() to attach a listener to receive it.\n     */\n    requestStatusUpdate()                             { this.sendMessageToServer ({ type: \"req_status\" }); }\n\n    /** Attaches a listener function that will be called whenever the patch's status changes.\n     *  The function will be called with a parameter object containing many properties describing the status,\n     *  including whether the patch is loaded, any errors, endpoint descriptions, its manifest, etc.\n     */\n    addStatusListener (listener)                      { this.addEventListener    (\"status\", listener); }\n\n    /** Removes a listener that was previously added with addStatusListener()\n     */\n    removeStatusListener (listener)                   { this.removeEventListener (\"status\", listener); }\n\n    /** Causes the patch to be reset to its \"just loaded\" state. */\n    resetToInitialState()                             { this.sendMessageToServer ({ type: \"req_reset\" }); }\n\n    //==============================================================================\n    // Methods for sending data to input endpoints:\n\n    /** Sends a value to one of the patch's input endpoints.\n     *\n     *  This can be used to send a value to either an 'event' or 'value' type input endpoint.\n     *  If the endpoint is a 'value' type, then the rampFrames parameter can optionally be used to specify\n     *  the number of frames over which the current value should ramp to the new target one.\n     *  The value parameter will be coerced to the type that is expected by the endpoint. So for\n     *  examples, numbers will be converted to float or integer types, javascript objects and arrays\n     *  will be converted into more complex types in as good a fashion is possible.\n     */\n    sendEventOrValue (endpointID, value, rampFrames, timeoutMillisecs)  { this.sendMessageToServer ({ type: \"send_value\", id: endpointID, value, rampFrames, timeout: timeoutMillisecs }); }\n\n    /** Sends a short MIDI message value to a MIDI endpoint.\n     *  The value must be a number encoded with `(byte0 << 16) | (byte1 << 8) | byte2`.\n     */\n    sendMIDIInputEvent (endpointID, shortMIDICode)    { this.sendEventOrValue (endpointID, { message: shortMIDICode }); }\n\n    /** Tells the patch that a series of changes that constitute a gesture is about to take place\n     *  for the given endpoint. Remember to call sendParameterGestureEnd() after they're done!\n     */\n    sendParameterGestureStart (endpointID)            { this.sendMessageToServer ({ type: \"send_gesture_start\", id: endpointID }); }\n\n    /** Tells the patch that a gesture started by sendParameterGestureStart() has finished.\n     */\n    sendParameterGestureEnd (endpointID)              { this.sendMessageToServer ({ type: \"send_gesture_end\", id: endpointID }); }\n\n    //==============================================================================\n    // Stored state control methods:\n\n    /** Requests a callback to any stored-state value listeners with the current value of a given key-value pair.\n     *  To attach a listener to receive these events, use addStoredStateValueListener().\n     *  @param {string} key\n     */\n    requestStoredStateValue (key)                     { this.sendMessageToServer ({ type: \"req_state_value\", key: key }); }\n\n    /** Modifies a key-value pair in the patch's stored state.\n     *  @param {string} key\n     *  @param {Object} newValue\n     */\n    sendStoredStateValue (key, newValue)              { this.sendMessageToServer ({ type: \"send_state_value\", key: key, value: newValue }); }\n\n    /** Attaches a listener function that will be called when any key-value pair in the stored state is changed.\n     *  The listener function will receive a message parameter with properties 'key' and 'value'.\n     */\n    addStoredStateValueListener (listener)            { this.addEventListener    (\"state_key_value\", listener); }\n\n    /** Removes a listener that was previously added with addStoredStateValueListener().\n     */\n    removeStoredStateValueListener (listener)         { this.removeEventListener (\"state_key_value\", listener); }\n\n    /** Applies a complete stored state to the patch.\n     *  To get the current complete state, use requestFullStoredState().\n     */\n    sendFullStoredState (fullState)                   { this.sendMessageToServer ({ type: \"send_full_state\", value: fullState }); }\n\n    /** Asynchronously requests the full stored state of the patch.\n     *  The listener function that is supplied will be called asynchronously with the state as its argument.\n     */\n    requestFullStoredState (callback)\n    {\n        const replyType = \"fullstate_response_\" + (Math.floor (Math.random() * 100000000)).toString();\n        this.addSingleUseListener (replyType, callback);\n        this.sendMessageToServer ({ type: \"req_full_state\", replyType: replyType });\n    }\n\n    //==============================================================================\n    // Listener methods:\n\n    /** Attaches a listener function that will receive updates with the events or audio data\n     *  that is being sent or received by an endpoint.\n     *\n     *  If the endpoint is an event or value, the callback will be given an argument which is\n     *  the new value.\n     *\n     *  If the endpoint has the right shape to be treated as \"audio\" then the callback will receive\n     *  a stream of updates of the min/max range of chunks of data that is flowing through it.\n     *  There will be one callback per chunk of data, and the size of chunks is specified by\n     *  the optional granularity parameter.\n     *\n     *  @param {string} endpointID\n     *  @param {number} granularity - if defined, this specifies the number of frames per callback\n     *  @param {boolean} sendFullAudioData - if false, the listener will receive an argument object containing\n     *     two properties 'min' and 'max', which are each an array of values, one element per audio\n     *     channel. This allows you to find the highest and lowest samples in that chunk for each channel.\n     *     If sendFullAudioData is true, the listener's argument will have a property 'data' which is an\n     *     array containing one array per channel of raw audio samples data.\n     */\n    addEndpointListener (endpointID, listener, granularity, sendFullAudioData)\n    {\n        listener.eventID = \"event_\" + endpointID + \"_\" + (Math.floor (Math.random() * 100000000)).toString();\n        this.addEventListener (listener.eventID, listener);\n        this.sendMessageToServer ({ type: \"add_endpoint_listener\", endpoint: endpointID, replyType:\n                                    listener.eventID, granularity: granularity, fullAudioData: sendFullAudioData });\n    }\n\n    /** Removes a listener that was previously added with addEndpointListener()\n     *  @param {string} endpointID\n    */\n    removeEndpointListener (endpointID, listener)\n    {\n        this.removeEventListener (listener.eventID, listener);\n        this.sendMessageToServer ({ type: \"remove_endpoint_listener\", endpoint: endpointID, replyType: listener.eventID });\n    }\n\n    /** This will trigger an asynchronous callback to any parameter listeners that are\n     *  attached, providing them with its up-to-date current value for the given endpoint.\n     *  Use addAllParameterListener() to attach a listener to receive the result.\n     *  @param {string} endpointID\n     */\n    requestParameterValue (endpointID)                  { this.sendMessageToServer ({ type: \"req_param_value\", id: endpointID }); }\n\n    /** Attaches a listener function which will be called whenever the value of a specific parameter changes.\n     *  The listener function will be called with an argument which is the new value.\n     *  @param {string} endpointID\n     */\n    addParameterListener (endpointID, listener)         { this.addEventListener (\"param_value_\" + endpointID.toString(), listener); }\n\n    /** Removes a listener that was previously added with addParameterListener()\n     *  @param {string} endpointID\n    */\n    removeParameterListener (endpointID, listener)      { this.removeEventListener (\"param_value_\" + endpointID.toString(), listener); }\n\n    /** Attaches a listener function which will be called whenever the value of any parameter changes in the patch.\n     *  The listener function will be called with an argument object with the fields 'endpointID' and 'value'.\n     */\n    addAllParameterListener (listener)                  { this.addEventListener (\"param_value\", listener); }\n\n    /** Removes a listener that was previously added with addAllParameterListener()\n     */\n    removeAllParameterListener (listener)               { this.removeEventListener (\"param_value\", listener); }\n\n    /** This takes a relative path to an asset within the patch bundle, and converts it to a\n     *  path relative to the root of the browser that is showing the view.\n     *\n     *  You need you use this in your view code to translate your asset URLs to a form that\n     *  can be safely used in your view's HTML DOM (e.g. in its CSS). This is needed because the\n     *  host's HTTP server (which is delivering your view pages) may have a different '/' root\n     *  than the root of your patch (e.g. if a single server is serving multiple patch GUIs).\n     *\n     *  @param {string} path\n     */\n    getResourceAddress (path)                           { return path; }\n\n    //==============================================================================\n    /**\n     *  This property contains various utility classes and functions from the Cmajor API,\n     *  for use in your GUI or worker code.\n     */\n    utilities = {\n        /** MIDI utility functions from cmaj-midi-helpers.js */\n        midi,\n        /** On-screen keyboard class from cmaj-piano-keyboard.js */\n        PianoKeyboard,\n        /** Basic parameter control GUI elements, from cmaj-parameter-controls.js */\n        ParameterControls,\n        /** The default view GUI, from cmaj-generic-patch-view.js */\n        GenericPatchView\n    };\n\n    //==============================================================================\n    // Private methods follow this point..\n\n    /** @private */\n    deliverMessageFromServer (msg)\n    {\n        if (msg.type === \"status\")\n            this.manifest = msg.message?.manifest;\n\n        if (msg.type == \"param_value\")\n            this.dispatchEvent (\"param_value_\" + msg.message.endpointID, msg.message.value);\n\n        this.dispatchEvent (msg.type, msg.message);\n    }\n}\n",
    "//\n//     ,ad888ba,                              88\n//    d8\"'    \"8b\n//   d8            88,dba,,adba,   ,aPP8A.A8  88\n//   Y8,           88    88    88  88     88  88\n//    Y8a.   .a8P  88    88    88  88,   ,88  88     (C)2024 Cmajor Software Ltd\n//     '\"Y888Y\"'   88    88    88  '\"8bbP\"Y8  88     https://cmajor.dev\n//                                           ,88\n//                                        888P\"\n//\n//  This file may be used under the terms of the ISC license:\n//\n//  Permission to use, copy, modify, and/or distribute this software for any purpose with or\n//  without fee is hereby granted, provided that the above copyright notice and this permission\n//  notice appear in all copies. THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL\n//  WARRANTIES WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\n//  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT, INDIRECT, OR\n//  CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS,\n//  WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN\n//  CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.\n\nimport { PatchConnection } from \"./cmaj-patch-connection.js\"\nimport * as GenericPatchView from \"./cmaj-generic-patch-view.js\"\n\n//==============================================================================\n/** Returns a list of types of view that can be created for this patch.\n */\nexport function getAvailableViewTypes(patchConnection) {\n    if (!patchConnection)\n        return [];\n\n    if (patchConnection.manifest?.view?.src)\n        return [\"custom\", \"generic\"];\n\n    return [\"generic\"];\n}\n\n//==============================================================================\n/** Creates and returns a HTMLElement view which can be shown to control this patch.\n *\n *  If no preferredType argument is supplied, this will return either a custom patch-specific\n *  view (if the manifest specifies one), or a generic view if not. The preferredType argument\n *  can be used to choose one of the types of view returned by getAvailableViewTypes().\n *\n *  @param {PatchConnection} patchConnection - the connection to use\n *  @param {string} preferredType - the name of the type of view to open, e.g. \"generic\"\n *                                  or the name of one of the views in the manifest\n *  @returns {HTMLElement} a HTMLElement that can be displayed as the patch GUI\n */\nexport async function createPatchView(patchConnection, preferredType) {\n    if (patchConnection?.manifest) {\n        let view = patchConnection.manifest.view;\n\n        if (view && preferredType === \"generic\")\n            if (view.src)\n                view = undefined;\n\n        const viewModuleURL = view?.src ? patchConnection.getResourceAddress(view.src) : \"./cmaj-generic-patch-view.js\";\n        const viewModule = view?.src ? await import(viewModuleURL) : GenericPatchView;\n        const patchView = await viewModule?.default(patchConnection);\n\n        if (patchView) {\n            patchView.style.display = \"block\";\n\n            if (view?.width > 10)\n                patchView.style.width = view.width + \"px\";\n            else\n                patchView.style.width = undefined;\n\n            if (view?.height > 10)\n                patchView.style.height = view.height + \"px\";\n            else\n                patchView.style.height = undefined;\n\n            return patchView;\n        }\n    }\n\n    return undefined;\n}\n\n//==============================================================================\n/** If a patch view declares itself to be scalable, this will attempt to scale it to fit\n *  into a given parent element.\n *\n *  @param {HTMLElement} view - the patch view\n *  @param {HTMLElement} parentToScale - the patch view's direct parent element, to which\n *                                       the scale factor will be applied\n *  @param {HTMLElement} parentContainerToFitTo - an outer parent of the view, whose bounds\n *                                                the view will be made to fit\n */\nexport function scalePatchViewToFit(view, parentToScale, parentContainerToFitTo) {\n    function getClientSize(view) {\n        const clientStyle = getComputedStyle(view);\n\n        return {\n            width: view.clientHeight - parseFloat(clientStyle.paddingTop) - parseFloat(clientStyle.paddingBottom),\n            height: view.clientWidth - parseFloat(clientStyle.paddingLeft) - parseFloat(clientStyle.paddingRight)\n        };\n    }\n\n    const scaleLimits = view.getScaleFactorLimits?.();\n\n    if (scaleLimits && (scaleLimits.minScale || scaleLimits.maxScale) && parentContainerToFitTo) {\n        const minScale = scaleLimits.minScale || 0.25;\n        const maxScale = scaleLimits.maxScale || 5.0;\n\n        const targetSize = getClientSize(parentContainerToFitTo);\n        const clientSize = getClientSize(view);\n\n        const scaleW = targetSize.width / clientSize.width;\n        const scaleH = targetSize.height / clientSize.height;\n\n        const scale = Math.min(maxScale, Math.max(minScale, Math.min(scaleW, scaleH)));\n\n        parentToScale.style.transform = `scale(${scale})`;\n    }\n    else {\n        parentToScale.style.transform = \"none\";\n    }\n}\n\n//==============================================================================\nclass PatchViewHolder extends HTMLElement {\n    constructor(view) {\n        super();\n        this.view = view;\n        this.style = `display: block; position: relative; width: 100%; height: 100%; overflow: visible; transform-origin: 0% 0%;`;\n    }\n\n    connectedCallback() {\n        this.appendChild(this.view);\n        this.resizeObserver = new ResizeObserver(() => scalePatchViewToFit(this.view, this, this.parentElement));\n        this.resizeObserver.observe(this.parentElement);\n        scalePatchViewToFit(this.view, this, this.parentElement);\n    }\n\n    disconnectedCallback() {\n        this.resizeObserver = undefined;\n        this.innerHTML = \"\";\n    }\n}\n\nif (!window.customElements.get(\"cmaj-patch-view-holder\")) window.customElements.define(\"cmaj-patch-view-holder\", PatchViewHolder);\n\n//==============================================================================\n/** Creates and returns a HTMLElement view which can be shown to control this patch.\n *\n *  Unlike createPatchView(), this will return a holder element that handles scaling\n *  and resizing, and which follows changes to the size of the parent that you\n *  append it to.\n *\n *  If no preferredType argument is supplied, this will return either a custom patch-specific\n *  view (if the manifest specifies one), or a generic view if not. The preferredType argument\n *  can be used to choose one of the types of view returned by getAvailableViewTypes().\n *\n *  @param {PatchConnection} patchConnection - the connection to use\n *  @param {string} preferredType - the name of the type of view to open, e.g. \"generic\"\n *                                  or the name of one of the views in the manifest\n *  @returns {HTMLElement} a HTMLElement that can be displayed as the patch GUI\n */\nexport async function createPatchViewHolder(patchConnection, preferredType) {\n    const view = await createPatchView(patchConnection, preferredType);\n\n    if (view)\n        return new PatchViewHolder(view);\n}\n",
    "//\n//     ,ad888ba,                              88\n//    d8\"'    \"8b\n//   d8            88,dba,,adba,   ,aPP8A.A8  88\n//   Y8,           88    88    88  88     88  88\n//    Y8a.   .a8P  88    88    88  88,   ,88  88     (C)2024 Cmajor Software Ltd\n//     '\"Y888Y\"'   88    88    88  '\"8bbP\"Y8  88     https://cmajor.dev\n//                                           ,88\n//                                        888P\"\n//\n//  This file may be used under the terms of the ISC license:\n//\n//  Permission to use, copy, modify, and/or distribute this software for any purpose with or\n//  without fee is hereby granted, provided that the above copyright notice and this permission\n//  notice appear in all copies. THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL\n//  WARRANTIES WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\n//  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT, INDIRECT, OR\n//  CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS,\n//  WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN\n//  CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.\n\nimport { PatchConnection } from \"./cmaj-patch-connection.js\"\n\n//==============================================================================\n// N.B. code will be serialised to a string, so all `registerWorkletProcessor`s\n// dependencies must be self contained and not capture things in the outer scope\nasync function serialiseWorkletProcessorFactoryToDataURI (CmajorClass, workletName, hostDescription)\n{\n    const serialisedInvocation = `(${registerWorkletProcessor.toString()}) (\"${workletName}\", ${CmajorClass.toString()}, \"${hostDescription}\");`\n\n    let reader = new FileReader();\n    reader.readAsDataURL (new Blob ([serialisedInvocation], { type: \"text/javascript\" }));\n\n    return await new Promise (res => { reader.onloadend = () => res (reader.result); });\n}\n\nfunction registerWorkletProcessor (workletName, CmajorClass, hostDescription)\n{\n    function makeConsumeOutputEvents ({ wrapper, eventOutputs, dispatchOutputEvent })\n    {\n        const outputEventHandlers = eventOutputs.map (({ endpointID }) =>\n        {\n            const readCount = wrapper[`getOutputEventCount_${endpointID}`]?.bind (wrapper);\n            const reset = wrapper[`resetOutputEventCount_${endpointID}`]?.bind (wrapper);\n            const readEventAtIndex = wrapper[`getOutputEvent_${endpointID}`]?.bind (wrapper);\n\n            return () =>\n            {\n                const count = readCount();\n\n                for (let i = 0; i < count; ++i)\n                    dispatchOutputEvent (endpointID, readEventAtIndex (i));\n\n                reset();\n            };\n        });\n\n        return () => outputEventHandlers.forEach ((consume) => consume() );\n    }\n\n    function setInitialParameterValues (parametersMap)\n    {\n        for (const { initialise } of Object.values (parametersMap))\n            initialise();\n    }\n\n    function makeEndpointMap (wrapper, endpoints, initialValueOverrides)\n    {\n        const toKey = ({ endpointType, endpointID }) =>\n        {\n            switch (endpointType)\n            {\n                case \"event\": return `sendInputEvent_${endpointID}`;\n                case \"value\": return `setInputValue_${endpointID}`;\n            }\n\n            throw \"Unhandled endpoint type\";\n        };\n\n        const lookup = {};\n\n        for (const { endpointID, endpointType, annotation, purpose } of endpoints)\n        {\n            const key = toKey ({ endpointType, endpointID });\n            const wrapperUpdate = wrapper[key]?.bind (wrapper);\n\n            const snapAndConstrainValue = (value) =>\n            {\n                if (annotation.step != null)\n                    value = Math.round (value / annotation.step) * annotation.step;\n\n                if (annotation.min != null && annotation.max != null)\n                    value = Math.min (Math.max (value, annotation.min), annotation.max);\n\n                return value;\n            };\n\n            const update = (value, rampFrames) =>\n            {\n                // N.B. value clamping and rampFrames from annotations not currently applied\n                const entry = lookup[endpointID];\n                entry.cachedValue = value;\n                wrapperUpdate (value, rampFrames);\n            };\n\n            if (update)\n            {\n                const initialValue = initialValueOverrides[endpointID] ?? annotation?.init;\n\n                lookup[endpointID] = {\n                    snapAndConstrainValue,\n                    update,\n                    initialise: initialValue != null ? () => update (initialValue) : () => {},\n                    purpose,\n                    cachedValue: undefined,\n                };\n            }\n        }\n\n        return lookup;\n    }\n\n    function makeStreamEndpointHandler ({ wrapper, toEndpoints, wrapperMethodNamePrefix })\n    {\n        const endpoints = toEndpoints (wrapper);\n        if (endpoints.length === 0)\n            return () => {};\n\n        let handlers = [];\n        let targetChannels = [];\n        let channelCount = 0;\n\n        for (const endpoint of endpoints)\n        {\n            const handleFrames = wrapper[`${wrapperMethodNamePrefix}_${endpoint.endpointID}`]?.bind (wrapper);\n\n            if (! handleFrames)\n                return () => {};\n\n            handlers.push (handleFrames);\n            targetChannels.push (channelCount);\n            channelCount += endpoint.numAudioChannels;\n        }\n\n        return (channels, blockSize) =>\n        {\n            for (let i = 0; i < handlers.length; i++)\n                handlers[i] (channels, blockSize, targetChannels[i]);\n        }\n    }\n\n    function makeInputStreamEndpointHandler (wrapper)\n    {\n        return makeStreamEndpointHandler ({\n            wrapper,\n            toEndpoints: wrapper => wrapper.getInputEndpoints().filter (({ purpose }) => purpose === \"audio in\"),\n            wrapperMethodNamePrefix: \"setInputStreamFrames\",\n        });\n    }\n\n    function makeOutputStreamEndpointHandler (wrapper)\n    {\n        return makeStreamEndpointHandler ({\n            wrapper,\n            toEndpoints: wrapper => wrapper.getOutputEndpoints().filter (({ purpose }) => purpose === \"audio out\"),\n            wrapperMethodNamePrefix: \"getOutputFrames\",\n        });\n    }\n\n    class WorkletProcessor extends AudioWorkletProcessor\n    {\n        static get parameterDescriptors()\n        {\n            return [];\n        }\n\n        constructor ({ processorOptions, ...options })\n        {\n            super (options);\n\n            this.processImpl = undefined;\n            this.consumeOutputEvents = undefined;\n\n            const { sessionID = Date.now() & 0x7fffffff, initialValueOverrides = {} } = processorOptions;\n\n            const wrapper = new CmajorClass();\n\n            wrapper.initialise (sessionID, sampleRate)\n                .then (() => this.initialisePatch (wrapper, initialValueOverrides))\n                .catch (error => { throw new Error (error)});\n        }\n\n        process (inputs, outputs)\n        {\n            const input = inputs[0];\n            const output = outputs[0];\n\n            this.processImpl?.(input, output);\n            this.consumeOutputEvents?.();\n\n            return true;\n        }\n\n        sendPatchMessage (payload)\n        {\n            this.port.postMessage ({ type: \"patch\", payload });\n        }\n\n        sendParameterValueChanged (endpointID, value)\n        {\n            this.sendPatchMessage ({\n                type: \"param_value\",\n                message: { endpointID, value }\n            });\n        }\n\n        initialisePatch (wrapper, initialValueOverrides)\n        {\n            try\n            {\n                const inputParameters = wrapper.getInputEndpoints().filter (({ purpose }) => purpose === \"parameter\");\n                const parametersMap = makeEndpointMap (wrapper, inputParameters, initialValueOverrides);\n\n                setInitialParameterValues (parametersMap);\n\n                const toParameterValuesWithKey = (endpointKey, parametersMap) =>\n                {\n                    const toValue = ([endpoint, { cachedValue }]) => ({ [endpointKey]: endpoint, value: cachedValue });\n                    return Object.entries (parametersMap).map (toValue);\n                };\n\n                const initialValues = toParameterValuesWithKey (\"endpointID\", parametersMap);\n                const initialState = wrapper.getState();\n\n                const resetState = () =>\n                {\n                    wrapper.restoreState (initialState);\n\n                    // N.B. update cache used for `req_param_value` messages (we don't currently read from the wasm heap)\n                    setInitialParameterValues (parametersMap);\n                };\n\n                const isNonAudioOrParameterEndpoint = ({ purpose }) => ! [\"audio in\", \"parameter\"].includes (purpose);\n                const otherInputs = wrapper.getInputEndpoints().filter (isNonAudioOrParameterEndpoint);\n                const otherInputEndpointsMap = makeEndpointMap (wrapper, otherInputs, initialValueOverrides);\n\n                const isEvent = ({ endpointType }) => endpointType === \"event\";\n                const eventInputs = wrapper.getInputEndpoints().filter (isEvent);\n                const eventOutputs = wrapper.getOutputEndpoints().filter (isEvent);\n\n                const makeEndpointListenerMap = (eventEndpoints) =>\n                {\n                    const listeners = {};\n\n                    for (const { endpointID } of eventEndpoints)\n                        listeners[endpointID] = [];\n\n                    return listeners;\n                };\n\n                const inputEventListeners = makeEndpointListenerMap (eventInputs);\n                const outputEventListeners = makeEndpointListenerMap (eventOutputs);\n\n                this.consumeOutputEvents = makeConsumeOutputEvents ({\n                    eventOutputs,\n                    wrapper,\n                    dispatchOutputEvent: (endpointID, event) =>\n                    {\n                        for (const { replyType } of outputEventListeners[endpointID] ?? [])\n                        {\n                            this.sendPatchMessage ({\n                                type: replyType,\n                                message: event.event, // N.B. chucking away frame and typeIndex info for now\n                            });\n                        }\n                    },\n                });\n\n                const blockSize = 128;\n                const prepareInputFrames = makeInputStreamEndpointHandler (wrapper);\n                const processOutputFrames = makeOutputStreamEndpointHandler (wrapper);\n\n                this.processImpl = (input, output) =>\n                {\n                    prepareInputFrames (input, blockSize);\n                    wrapper.advance (blockSize);\n                    processOutputFrames (output, blockSize);\n                };\n\n                // N.B. the message port makes things straightforward, but it allocates (when sending + receiving).\n                // so, we aren't doing ourselves any favours. we probably ought to marshal raw bytes over to the gui in\n                // a pre-allocated lock-free message queue (using `SharedArrayBuffer` + `Atomic`s) and transform the raw\n                // messages there.\n                this.port.addEventListener (\"message\", e =>\n                {\n                    if (e.data.type !== \"patch\")\n                        return;\n\n                    const msg = e.data.payload;\n\n                    switch (msg.type)\n                    {\n                        case \"req_status\":\n                        {\n                            this.sendPatchMessage ({\n                                type: \"status\",\n                                message: {\n                                    details: {\n                                        inputs: wrapper.getInputEndpoints(),\n                                        outputs: wrapper.getOutputEndpoints(),\n                                    },\n                                    sampleRate,\n                                    host: hostDescription ? hostDescription : \"WebAudio\"\n                                },\n                            });\n                            break;\n                        }\n\n                        case \"req_reset\":\n                        {\n                            resetState();\n                            initialValues.forEach (v => this.sendParameterValueChanged (v.endpointID, v.value));\n                            break;\n                        }\n\n                        case \"req_param_value\":\n                        {\n                            // N.B. keep a local cache here so that we can send the values back when requested.\n                            // we could instead have accessors into the wasm heap.\n                            const endpointID = msg.id;\n                            const parameter = parametersMap[endpointID];\n                            if (! parameter)\n                                return;\n\n                            const value = parameter.cachedValue;\n                            this.sendParameterValueChanged (endpointID, value);\n                            break;\n                        }\n\n                        case \"send_value\":\n                        {\n                            const endpointID = msg.id;\n                            const parameter = parametersMap[endpointID];\n\n                            if (parameter)\n                            {\n                                const newValue = parameter.snapAndConstrainValue (msg.value);\n                                parameter.update (newValue, msg.rampFrames);\n\n                                this.sendParameterValueChanged (endpointID, newValue);\n                                return;\n                            }\n\n                            const inputEndpoint = otherInputEndpointsMap[endpointID];\n\n                            if (inputEndpoint)\n                            {\n                                inputEndpoint.update (msg.value);\n\n                                for (const { replyType } of inputEventListeners[endpointID] ?? [])\n                                {\n                                    this.sendPatchMessage ({\n                                        type: replyType,\n                                        message: inputEndpoint.cachedValue,\n                                    });\n                                }\n                            }\n                            break;\n                        }\n\n                        case \"send_gesture_start\": break;\n                        case \"send_gesture_end\": break;\n\n                        case \"req_full_state\":\n                            this.sendPatchMessage ({\n                                type: msg?.replyType,\n                                message: {\n                                    parameters: toParameterValuesWithKey (\"name\", parametersMap),\n                                },\n                            });\n                            break;\n\n                        case \"send_full_state\":\n                        {\n                            const { parameters = [] } = e.data.payload?.value || [];\n\n                            for (const [endpointID, parameter] of Object.entries (parametersMap))\n                            {\n                                const namedNextValue = parameters.find (({ name }) => name === endpointID);\n\n                                if (namedNextValue)\n                                    parameter.update (namedNextValue.value);\n                                else\n                                    parameter.initialise();\n\n                                this.sendParameterValueChanged (endpointID, parameter.cachedValue);\n                            }\n                            break;\n                        }\n\n                        case \"add_endpoint_listener\":\n                        {\n                            const insertIfValidEndpoint = (lookup, msg) =>\n                            {\n                                const endpointID = msg?.endpoint;\n                                const listeners = lookup[endpointID]\n\n                                if (! listeners)\n                                    return false;\n\n                                return listeners.push ({ replyType: msg?.replyType }) > 0;\n                            };\n\n                            if (! insertIfValidEndpoint (inputEventListeners, msg))\n                                insertIfValidEndpoint (outputEventListeners, msg)\n\n                            break;\n                        }\n\n                        case \"remove_endpoint_listener\":\n                        {\n                            const removeIfValidReplyType = (lookup, msg) =>\n                            {\n                                const endpointID = msg?.endpoint;\n                                const listeners = lookup[endpointID];\n\n                                if (! listeners)\n                                    return false;\n\n                                const index = listeners.indexOf (msg?.replyType);\n\n                                if (index === -1)\n                                    return false;\n\n                                return listeners.splice (index, 1).length === 1;\n                            };\n\n                            if (! removeIfValidReplyType (inputEventListeners, msg))\n                                removeIfValidReplyType (outputEventListeners, msg)\n\n                            break;\n                        }\n\n                        default:\n                            break;\n                    }\n                });\n\n                this.port.postMessage ({ type: \"initialised\" });\n                this.port.start();\n            }\n            catch (e)\n            {\n                this.port.postMessage (e.toString());\n            }\n        }\n    }\n\n    registerProcessor (workletName, WorkletProcessor);\n}\n\n//==============================================================================\nasync function connectToAudioIn (audioContext, node)\n{\n    try\n    {\n        const input = await navigator.mediaDevices.getUserMedia ({\n            audio: {\n                echoCancellation: false,\n                noiseSuppression: false,\n                autoGainControl:  false,\n        }});\n\n        if (! input)\n            throw new Error();\n\n        const source = audioContext.createMediaStreamSource (input);\n\n        if (! source)\n            throw new Error();\n\n        source.connect (node);\n    }\n    catch (e)\n    {\n        console.warn (`Could not open audio input`);\n    }\n}\n\nasync function connectToMIDI (connection, midiEndpointID)\n{\n    try\n    {\n        if (! navigator.requestMIDIAccess)\n            throw new Error (\"Web MIDI API not supported.\");\n\n        const midiAccess = await navigator.requestMIDIAccess ({ sysex: true, software: true });\n\n        for (const input of midiAccess.inputs.values())\n        {\n            input.onmidimessage = ({ data }) =>\n                connection.sendMIDIInputEvent (midiEndpointID, data[2] | (data[1] << 8) | (data[0] << 16));\n        }\n    }\n    catch (e)\n    {\n        console.warn (`Could not open MIDI devices: ${e}`);\n    }\n}\n\n\n//==============================================================================\n/**  This class provides a PatchConnection that controls a Cmajor audio worklet\n *   node.\n */\nexport class AudioWorkletPatchConnection extends PatchConnection\n{\n    constructor (manifest)\n    {\n        super();\n\n        this.manifest = manifest;\n        this.cachedState = {};\n    }\n\n    //==============================================================================\n    /**  Initialises this connection to load and control the given Cmajor class.\n     *\n     *   @param {Object} parameters - the parameters to use\n     *   @param {Object} parameters.CmajorClass - the generated Cmajor class\n     *   @param {AudioContext} parameters.audioContext - a web audio AudioContext object\n     *   @param {string} parameters.workletName - the name to give the new worklet that is created\n     *   @param {string} parameters.hostDescription - a description of the host that is using the patch\n     *   @param {number} [parameters.sessionID] - an integer to use for the session ID, or undefined to use a default\n     *   @param {Object} [parameters.initialValueOverrides] - optional initial values for parameter endpoints\n     *   @param {string} [parameters.rootResourcePath] - optionally, a root to use when resolving resource paths\n     */\n    async initialise ({ CmajorClass,\n                        audioContext,\n                        workletName,\n                        hostDescription,\n                        sessionID,\n                        initialValueOverrides,\n                        rootResourcePath })\n    {\n        this.audioContext = audioContext;\n\n        if (rootResourcePath)\n        {\n            this.rootResourcePath = rootResourcePath.toString();\n\n            if (! this.rootResourcePath.endsWith (\"/\"))\n                this.rootResourcePath += \"/\";\n        }\n        else\n        {\n            const getBaseUrl = (relativeURL) =>\n            {\n                const baseURL = relativeURL.href.substring(0, relativeURL.href.lastIndexOf('/'));\n                return baseURL;\n            };\n\n            this.rootResourcePath = getBaseUrl(new URL('.', import.meta.url));\n\n            if (! this.rootResourcePath.endsWith (\"/\"))\n                this.rootResourcePath += \"/../\";\n        }\n\n        const dataURI = await serialiseWorkletProcessorFactoryToDataURI (CmajorClass, workletName, hostDescription);\n        await audioContext.audioWorklet.addModule (dataURI);\n\n        this.inputEndpoints = CmajorClass.prototype.getInputEndpoints();\n        this.outputEndpoints = CmajorClass.prototype.getOutputEndpoints();\n\n        const audioInputEndpoints  = this.inputEndpoints.filter (({ purpose }) => purpose === \"audio in\");\n        const audioOutputEndpoints = this.outputEndpoints.filter (({ purpose }) => purpose === \"audio out\");\n\n        let inputChannelCount = 0;\n        let outputChannelCount = 0;\n\n        audioInputEndpoints.forEach  ((endpoint) => { inputChannelCount = inputChannelCount + endpoint.numAudioChannels; });\n        audioOutputEndpoints.forEach ((endpoint) => { outputChannelCount = outputChannelCount + endpoint.numAudioChannels; });\n\n        const hasInput = inputChannelCount > 0;\n        const hasOutput = outputChannelCount > 0;\n\n        const node = new AudioWorkletNode (audioContext, workletName, {\n            numberOfInputs: +hasInput,\n            numberOfOutputs: +hasOutput,\n            channelCountMode: \"explicit\",\n            channelCount: hasInput ? inputChannelCount : undefined,\n            outputChannelCount: hasOutput ? [outputChannelCount] : [],\n\n            processorOptions:\n            {\n                sessionID,\n                initialValueOverrides\n            }\n        });\n\n        const waitUntilWorkletInitialised = async () =>\n        {\n            return new Promise ((resolve) =>\n            {\n                const filterForInitialised = (e) =>\n                {\n                    if (e.data.type === \"initialised\")\n                    {\n                        node.port.removeEventListener (\"message\", filterForInitialised);\n                        resolve();\n                    }\n                };\n\n                node.port.addEventListener (\"message\", filterForInitialised);\n            });\n        };\n\n        node.port.start();\n\n        await waitUntilWorkletInitialised();\n\n        this.audioNode = node;\n\n        node.port.addEventListener (\"message\", e =>\n        {\n            if (e.data.type === \"patch\")\n            {\n                const msg = e.data.payload;\n\n                if (msg?.type === \"status\")\n                    msg.message = { manifest: this.manifest, ...msg.message };\n\n                this.deliverMessageFromServer (msg)\n            }\n        });\n\n        await this.startPatchWorker();\n    }\n\n    //==============================================================================\n    /**  Attempts to connect this connection to the default audio and MIDI channels.\n     *   This must only be called once initialise() has completed successfully.\n     *\n     *   @param {AudioContext} audioContext - a web audio AudioContext object\n     */\n    async connectDefaultAudioAndMIDI (audioContext)\n    {\n        if (! this.audioNode)\n            throw new Error (\"AudioWorkletPatchConnection.initialise() must have been successfully completed before calling connectDefaultAudioAndMIDI()\");\n\n        const getInputWithPurpose = (purpose) =>\n        {\n            for (const i of this.inputEndpoints)\n                if (i.purpose === purpose)\n                    return i.endpointID;\n        }\n\n        const midiEndpointID = getInputWithPurpose (\"midi in\");\n\n        if (midiEndpointID)\n            connectToMIDI (this, midiEndpointID);\n\n        if (getInputWithPurpose (\"audio in\"))\n            connectToAudioIn (audioContext, this.audioNode);\n\n        this.audioNode.connect (audioContext.destination);\n    }\n\n    //==============================================================================\n    sendMessageToServer (msg)\n    {\n        this.audioNode.port.postMessage ({ type: \"patch\", payload: msg });\n    }\n\n    requestStoredStateValue (key)\n    {\n        this.dispatchEvent (\"state_key_value\", { key, value: this.cachedState[key] });\n    }\n\n    sendStoredStateValue (key, newValue)\n    {\n        const changed = this.cachedState[key] != newValue;\n\n        if (changed)\n        {\n            const shouldRemove = newValue == null;\n            if (shouldRemove)\n            {\n                delete this.cachedState[key];\n                return;\n            }\n\n            this.cachedState[key] = newValue;\n            // N.B. notifying the client only when updating matches behaviour of the patch player\n            this.dispatchEvent (\"state_key_value\", { key, value: newValue });\n        }\n    }\n\n    sendFullStoredState (fullState)\n    {\n        const currentStateCleared = (() =>\n        {\n            const out = {};\n            Object.keys (this.cachedState).forEach (k => out[k] = undefined);\n            return out;\n        })();\n\n        const incomingStateValues = fullState.values ?? {};\n        const nextStateValues = { ...currentStateCleared, ...incomingStateValues };\n\n        Object.entries (nextStateValues).forEach (([key, value]) => this.sendStoredStateValue (key, value));\n\n        // N.B. worklet will handle the `parameters` part\n        super.sendFullStoredState (fullState);\n    }\n\n    requestFullStoredState (callback)\n    {\n        // N.B. the worklet only handles the `parameters` part, so we patch the key-value state in here\n        super.requestFullStoredState (msg => callback ({ values: { ...this.cachedState }, ...msg }));\n    }\n\n    getResourceAddress (path)\n    {\n        return this.rootResourcePath + path;\n    }\n\n    async readResource (path)\n    {\n        return fetch (path);\n    }\n\n    async readResourceAsAudioData (path)\n    {\n        const response = await this.readResource (path);\n        const buffer = await this.audioContext.decodeAudioData (await response.arrayBuffer());\n\n        let frames = [];\n\n        for (let i = 0; i < buffer.length; ++i)\n            frames.push ([]);\n\n        for (let chan = 0; chan < buffer.numberOfChannels; ++chan)\n        {\n            const src = buffer.getChannelData (chan);\n\n            for (let i = 0; i < buffer.length; ++i)\n                frames[i].push (src[i]);\n        }\n\n        return { frames, sampleRate: buffer.sampleRate };\n    }\n\n    //==============================================================================\n    /** @private */\n    async startPatchWorker()\n    {\n        if (this.manifest.worker?.length > 0)\n        {\n            const module = await import (this.getResourceAddress (this.manifest.worker));\n            module.default (this);\n        }\n    }\n}\n",
    "import { LitElement, PropertyValues, css, html } from 'lit';\nimport { customElement } from 'lit/decorators.js';\nimport { createPatchViewHolder } from './cmaj_api/cmaj-patch-view.js';\nimport PianoKeyboard from './cmaj_api/cmaj-piano-keyboard.js';\nimport * as helpers from './cmaj_api/cmaj-audio-worklet-helper.js'\nif (!window.customElements.get('cmaj-panel-piano-keyboard')) customElements.define('cmaj-panel-piano-keyboard', PianoKeyboard);\n\n@customElement('patch-preview') export class PreviewComoponents extends LitElement {\n\tstatic styles = css`\n\t\t:host {\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\t\t\twidth: 100%;\n\t\t\theight: 100%;\n\t\t}\n\t\tmain {\n\t\t\tflex: 1;\n\t\t\tposition: relative;\n\t\t}\n\t\tmain>* {\n\t\t\tposition: absolute !important;\n\t\t\tinset: 0;\n\t\t}\n\t\tcmaj-panel-piano-keyboard {\n\t\t\theight: 42px;\n\t\t\tflex-shrink: 0;\n\t\t\tdisplay: none;\n\t\t\tjustify-content: center;\n\t\t\talign-items: center;\n\t\t\tmax-width: 100% !important;\n\t\t}\n\t`;\n\taudioContext?: AudioContext;\n\tkeyboard!: PianoKeyboard;\n\tcontainer!: HTMLElement;\n\n\tprotected async firstUpdated(_changedProperties: PropertyValues) {\n\t\tsuper.firstUpdated(_changedProperties);\n\t\tthis.keyboard = this.shadowRoot!.querySelector('cmaj-panel-piano-keyboard') as PianoKeyboard;\n\t\tthis.container = this.shadowRoot!.querySelector('main') as HTMLElement;\n\t\tthis.audioContext = new AudioContext();\n\t\tthis.audioContext.suspend();\n\t\twindow.addEventListener('message', this.handleMessage);\n\t}\n\n\tprivate handleMessage = (event: MessageEvent<any>) => {\n\t\tswitch (event.data.type) {\n\t\t\tcase 'init': this.init(event.data.manifest, event.data.version, event.data.code); return;\n\t\t}\n\t}\n\n\tprivate async init(manifest: any, version: any, code: string) {\n\t\tconst connection = new helpers.AudioWorkletPatchConnection(manifest);\n\t\tconnection.getCmajorVersion = () => version;\n\t\tawait (connection.initialise({\n\t\t\tCmajorClass: await new Function(`return (${code});`)(),\n\t\t\taudioContext: this.audioContext!,\n\t\t\tworkletName: 'cmaj-worklet-processor',\n\t\t\thostDescription: 'WebAudio',\n\t\t\trootResourcePath: './',\n\t\t}));\n\t\twindow.addEventListener('mousedown', () => this.startAudioContent(connection), { once: true });\n\t\tthis.container.appendChild((await createPatchViewHolder(connection)));\n\t\tconst midiInputEndpointID = this.getMIDIInputEndpointID(connection);\n\t\tif (!midiInputEndpointID) return;\n\t\tthis.keyboard.attachToPatchConnection(connection, midiInputEndpointID);\n\t\tthis.keyboard.style.display = 'flex';\n\t}\n\tcreateJavascriptWrapperClass = async (code: string) => await new Function(`return (${code});`)()\n\tgetMIDIInputEndpointID = (connection: helpers.AudioWorkletPatchConnection) => connection.inputEndpoints.find((i: any) => i.purpose === 'midi in')?.endpointID\n\tstartAudioContent = (connection: helpers.AudioWorkletPatchConnection) => {\n\t\tconnection.connectDefaultAudioAndMIDI(this.audioContext!);\n\t\tthis.audioContext?.resume();\n\t}\n\trender = () => html`\n\t\t<main></main>\n\t\t<cmaj-panel-piano-keyboard></cmaj-panel-piano-keyboard>\n\t`;\n}"
  ],
  "mappings": "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",
  "debugId": "8100A7636C45C83964756E2164756E21",
  "names": []
}